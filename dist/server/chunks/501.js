exports.id=501,exports.ids=[501],exports.modules={60125:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,67490,23)),Promise.resolve().then(a.bind(a,95360)),Promise.resolve().then(a.bind(a,36513)),Promise.resolve().then(a.bind(a,93903)),Promise.resolve().then(a.bind(a,34876)),Promise.resolve().then(a.bind(a,60307)),Promise.resolve().then(a.bind(a,48976)),Promise.resolve().then(a.bind(a,63273)),Promise.resolve().then(a.bind(a,3866)),Promise.resolve().then(a.bind(a,88521)),Promise.resolve().then(a.bind(a,1025))},15111:(e,t,a)=>{Promise.resolve().then(a.bind(a,50640))},56738:(e,t,a)=>{"use strict";a.d(t,{Z:()=>S});var r=a(53854),s=a(49630),l=a(34218),i=a(44746),n=a(82457),o=a(74920),d=a(68504);let c=i.fC,f=i.xz;i.x8;let u=i.h_,m=l.forwardRef(({className:e,...t},a)=>r.jsx(i.aV,{className:(0,d.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:a}));m.displayName=i.aV.displayName;let x=(0,n.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),p=l.forwardRef(({side:e="right",className:t,children:a,...s},l)=>(0,r.jsxs)(u,{children:[r.jsx(m,{}),(0,r.jsxs)(i.VY,{ref:l,className:(0,d.cn)(x({side:e}),t),...s,children:[a,(0,r.jsxs)(i.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[r.jsx(o.Z,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));p.displayName=i.VY.displayName;let h=({className:e,...t})=>r.jsx("div",{className:(0,d.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...t});h.displayName="SheetHeader";let g=l.forwardRef(({className:e,...t},a)=>r.jsx(i.Dx,{ref:a,className:(0,d.cn)("text-lg font-semibold text-foreground",e),...t}));g.displayName=i.Dx.displayName;let j=l.forwardRef(({className:e,...t},a)=>r.jsx(i.dk,{ref:a,className:(0,d.cn)("text-sm text-muted-foreground",e),...t}));j.displayName=i.dk.displayName;var v=a(24234),w=a(53110),b=a(1025),y=a(63301),N=a(59924),k=a(69211);let S=({children:e,existingCollaborators:t,getCollaborators:a})=>{let{user:i}=(0,s.useSupabaseUser)(),[n,o]=(0,l.useState)([]),d=(0,l.useRef)();(0,l.useEffect)(()=>()=>{d.current&&clearTimeout(d.current)},[]);let u=e=>{a(e)};return(0,r.jsxs)(c,{children:[r.jsx(f,{className:"w-full",children:e}),(0,r.jsxs)(p,{className:"w-[400px] sm:w-[500px]",children:[(0,r.jsxs)(h,{children:[r.jsx(g,{children:"Search Collaborator"}),r.jsx(j,{children:r.jsx("p",{className:"text-sm text-muted-foreground",children:"You can also remove collaborator after adding them from the setting tab."})})]}),(0,r.jsxs)("div",{className:"flex justify-center items-center gap-2 mt-2",children:[r.jsx(v.Z,{}),r.jsx(w.I,{name:"name",className:"dark:bg-background",placeholder:"Email",onChange:e=>{d.current&&clearTimeout(d.current),d.current=setTimeout(async()=>{let t=await (0,k.rj)(e.target.value);o(t)},450)}})]}),r.jsx(b.ScrollArea,{className:"mt-6 overflow-y-scroll w-full rounded-md",children:n.filter(e=>!t.some(t=>t.id===e.id)).filter(e=>e.id!==i?.id).map(e=>(0,r.jsxs)("div",{className:"p-4 flex justify-center items-center",children:[(0,r.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,r.jsxs)(y.Avatar,{className:"w-8 h-8",children:[r.jsx(y.AvatarImage,{src:"/"}),r.jsx(y.AvatarFallback,{children:"CP"})]}),r.jsx("div",{className:"text-sm gap-2 overflow-hidden overflow-ellipsis w-[180px] text-muted-foreground",children:e.email})]}),r.jsx(N.z,{variant:"secondary",onClick:()=>u(e),children:"Add"})]},e.id))})]})]})}},21111:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var r=a(53854);a(34218);var s=a(88521),l=a(29395);let i=({header:e,content:t,children:a,description:i,className:n})=>(0,r.jsxs)(s.Dialog,{children:[r.jsx(s.DialogTrigger,{className:(0,l.Z)("",n),children:a}),(0,r.jsxs)(s.DialogContent,{className:"h-screen block sm:h-[440px] w-full overflow-scroll",children:[(0,r.jsxs)(s.DialogHeader,{children:[r.jsx(s.DialogTitle,{children:e}),r.jsx(s.DialogDescription,{children:i})]}),t]})]})},95360:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var r=a(53854);a(34218);var s=a(59924),l=a(19198),i=a(51018),n=a(19066);let o=({children:e})=>{let{dispatch:t}=(0,l.useAppState)(),a=(0,i.useRouter)(),o=(0,n.createClientComponentClient)(),d=async()=>{await o.auth.signOut(),a.refresh(),t({type:"SET_WORKSPACES",payload:{workspaces:[]}}),a.push("/")};return r.jsx(s.z,{variant:"ghost",size:"icon",className:"p-0",onClick:d,children:e})}},36513:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var r=a(53854),s=a(30253);a(34218);var l=a(59924),i=a(76593),n=a(62149);let o=()=>{let{setTheme:e,theme:t}=(0,s.F)();return(0,r.jsxs)(l.z,{variant:"outline",size:"icon",onClick:()=>e("dark"===t?"light":"dark"),children:[r.jsx(i.Z,{className:"h-[1.2rem]   w-[1.2rem]   rotate-0   scale-100   transition-all   dark:-rotate-90   dark:scale-0   "}),r.jsx(n.Z,{className:"absolute   h-[1.2rem]   w-[1.2rem]   rotate-90   scale-0   transition-all   dark:rotate-0   dark:scale-100   "})]})}},50640:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>D});var r=a(53854),s=a(19198),l=a(34218);a(45735);var i=a(59924),n=a(69211),o=a(51018),d=a(2978),c=a(63301),f=a(82457),u=a(68504);let m=(0,f.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function x({className:e,variant:t,...a}){return r.jsx("div",{className:(0,u.cn)(m({variant:t}),e),...a})}var p=a(41956),h=a.n(p),g=a(19066),j=a(60401),v=a(21111),w=a(92747),b=a(99589),y=a(53110),N=a(99615);let k=({dirType:e,id:t})=>{let a=(0,g.createClientComponentClient)(),{state:l,workspaceId:o,folderId:d,dispatch:c}=(0,s.useAppState)(),{register:f,handleSubmit:u,reset:m,formState:{isSubmitting:x,errors:p}}=(0,w.cI)({mode:"onChange",defaultValues:{banner:""}}),h=async r=>{let s=r.banner?.[0];if(s&&t)try{let r=null,l=async()=>{let{data:e,error:l}=await a.storage.from("file-banners").upload(`banner-${t}`,s,{cacheControl:"5",upsert:!0});if(l)throw Error();r=e.path};if("file"===e){if(!o||!d)return;await l(),c({type:"UPDATE_FILE",payload:{file:{bannerUrl:r},fileId:t,folderId:d,workspaceId:o}}),await (0,n.Dd)({bannerUrl:r},t)}else if("folder"===e){if(!o||!d)return;await l(),c({type:"UPDATE_FOLDER",payload:{folder:{bannerUrl:r},folderId:t,workspaceId:o}}),await (0,n.Tb)({bannerUrl:r},t)}else if("workspace"===e){if(!o)return;await l(),c({type:"UPDATE_WORKSPACE",payload:{workspace:{bannerUrl:r},workspaceId:o}}),await (0,n.eA)({bannerUrl:r},t)}}catch(e){console.log(e)}};return(0,r.jsxs)("form",{onSubmit:u(h),className:"flex flex-col gap-2",children:[r.jsx(b._,{className:"text-sm text-muted-foreground",htmlFor:"bannerImage",children:"Banner"}),r.jsx(y.I,{id:"bannerImage",type:"file",accept:"image/*",disabled:x,...f("banner",{required:"Banner image is requireed"})}),r.jsx("small",{className:"text-red-600",children:p.banner?.message?.toString()}),r.jsx(i.z,{disabled:x,type:"submit",children:x?r.jsx(N.Z,{}):"Upload Banner"})]})},S=({id:e,dirType:t,children:a,className:s})=>r.jsx(v.Z,{header:"Upload Banner",content:r.jsx(k,{dirType:t,id:e}),className:s,children:a});var C=a(50257),E=a(95726),P=a(49630);let D=({dirDetails:e,dirType:t,fileId:a})=>{let f=(0,g.createClientComponentClient)(),{state:u,workspaceId:m,folderId:p,dispatch:v}=(0,s.useAppState)(),w=(0,l.useRef)(),{user:b}=(0,P.useSupabaseUser)(),y=(0,o.useRouter)(),{socket:N,isConnected:k}=(0,E.useSocket)(),D=(0,o.usePathname)(),[I,A]=(0,l.useState)(null),[_,T]=(0,l.useState)([]),[U,R]=(0,l.useState)(!1),[F,$]=(0,l.useState)(!1),[z,Z]=(0,l.useState)([]),L=(0,l.useMemo)(()=>{let r;return("file"===t&&(r=u.workspaces.find(e=>e.id===m)?.folders.find(e=>e.id===p)?.files.find(e=>e.id===a)),"folder"===t&&(r=u.workspaces.find(e=>e.id===m)?.folders.find(e=>e.id===a)),"workspace"===t&&(r=u.workspaces.find(e=>e.id===a)),r)?r:{title:e.title,iconId:e.iconId,createdAt:e.createdAt,data:e.data,inTrash:e.inTrash,bannerUrl:e.bannerUrl}},[u,m,p,e.bannerUrl,e.createdAt,e.data,e.iconId,e.inTrash,e.title]),O=(0,l.useMemo)(()=>{if(!D||!u.workspaces||!m)return;let e=D.split("/").filter(e=>"dashboard"!==e&&e),t=u.workspaces.find(e=>e.id===m),a=t?`${t.iconId} ${t.title}`:"";if(1===e.length)return a;let r=e[1],s=t?.folders.find(e=>e.id===r),l=s?`/ ${s.iconId} ${s.title}`:"";if(2===e.length)return`${a} ${l}`;let i=e[2],n=s?.files.find(e=>e.id===i),o=n?`/ ${n.iconId} ${n.title}`:"";return`${a} ${l} ${o}`},[u,D,m]),W=(0,l.useCallback)(async e=>{},[]),G=async()=>{if("file"===t){if(!p||!m)return;v({type:"UPDATE_FILE",payload:{file:{inTrash:""},fileId:a,folderId:p,workspaceId:m}}),await (0,n.Dd)({inTrash:""},a)}if("folder"===t){if(!m)return;v({type:"UPDATE_FOLDER",payload:{folder:{inTrash:""},folderId:a,workspaceId:m}}),await (0,n.Tb)({inTrash:""},a)}},V=async()=>{if("file"===t){if(!p||!m)return;v({type:"DELETE_FILE",payload:{fileId:a,folderId:p,workspaceId:m}}),await (0,n._I)(a),y.replace(`/dashboard/${m}`)}if("folder"===t){if(!m)return;v({type:"DELETE_FOLDER",payload:{folderId:a,workspaceId:m}}),await (0,n.Go)(a),y.replace(`/dashboard/${m}`)}},M=async e=>{if(a){if("workspace"===t&&(v({type:"UPDATE_WORKSPACE",payload:{workspace:{iconId:e},workspaceId:a}}),await (0,n.eA)({iconId:e},a)),"folder"===t){if(!m)return;v({type:"UPDATE_FOLDER",payload:{folder:{iconId:e},workspaceId:m,folderId:a}}),await (0,n.Tb)({iconId:e},a)}if("file"===t){if(!m||!p)return;v({type:"UPDATE_FILE",payload:{file:{iconId:e},workspaceId:m,folderId:p,fileId:a}}),await (0,n.Dd)({iconId:e},a)}}},B=async()=>{if(a){if(R(!0),"file"===t){if(!p||!m)return;v({type:"UPDATE_FILE",payload:{file:{bannerUrl:""},fileId:a,folderId:p,workspaceId:m}}),await f.storage.from("file-banners").remove([`banner-${a}`]),await (0,n.Dd)({bannerUrl:""},a)}if("folder"===t){if(!m)return;v({type:"UPDATE_FOLDER",payload:{folder:{bannerUrl:""},folderId:a,workspaceId:m}}),await f.storage.from("file-banners").remove([`banner-${a}`]),await (0,n.Tb)({bannerUrl:""},a)}"workspace"===t&&(v({type:"UPDATE_WORKSPACE",payload:{workspace:{bannerUrl:""},workspaceId:a}}),await f.storage.from("file-banners").remove([`banner-${a}`]),await (0,n.eA)({bannerUrl:""},a)),R(!1)}};return(0,l.useEffect)(()=>{if(!a)return;let e=async()=>{if("file"===t){let{data:e,error:t}=await (0,n.cd)(a);if(t||!e)return y.replace("/dashboard");if(!e[0]){if(!m)return;return y.replace(`/dashboard/${m}`)}if(!m||null===I||!e[0].data)return;I.setContents(JSON.parse(e[0].data||"")),v({type:"UPDATE_FILE",payload:{file:{data:e[0].data},fileId:a,folderId:e[0].folderId,workspaceId:m}})}if("folder"===t){let{data:e,error:t}=await (0,n.NN)(a);if(t||!e)return y.replace("/dashboard");if(e[0]||y.replace(`/dashboard/${m}`),null===I||!e[0].data)return;I.setContents(JSON.parse(e[0].data||"")),v({type:"UPDATE_FOLDER",payload:{folderId:a,folder:{data:e[0].data},workspaceId:e[0].workspaceId}})}if("workspace"===t){let{data:e,error:t}=await (0,n.qd)(a);if(t||!e)return y.replace("/dashboard");if(!e[0]||null===I||!e[0].data)return;I.setContents(JSON.parse(e[0].data||"")),v({type:"UPDATE_WORKSPACE",payload:{workspace:{data:e[0].data},workspaceId:a}})}};e()},[a,m,I,t]),(0,l.useEffect)(()=>{if(null===I||null===N||!a||!z.length)return;let e=(e,t,r)=>{if(t===a){let t=z.find(e=>e.cursors()?.[0].id===r);t&&t.moveCursor(r,e)}};return N.on("receive-cursor-move",e),()=>{N.off("receive-cursor-move",e)}},[I,N,a,z]),(0,l.useEffect)(()=>{null!==N&&null!==I&&a&&N.emit("create-room",a)},[N,I,a]),(0,l.useEffect)(()=>{if(null===I||null===N||!a||!b)return;let e=e=>(t,r,s)=>{"user"===s&&e&&N.emit("send-cursor-move",t,a,e)},r=(e,r,s)=>{if("user"!==s)return;w.current&&clearTimeout(w.current),$(!0);let l=I.getContents(),i=I.getLength();w.current=setTimeout(async()=>{if(l&&1!==i&&a){if("workspace"==t&&(v({type:"UPDATE_WORKSPACE",payload:{workspace:{data:JSON.stringify(l)},workspaceId:a}}),await (0,n.eA)({data:JSON.stringify(l)},a)),"folder"==t){if(!m)return;v({type:"UPDATE_FOLDER",payload:{folder:{data:JSON.stringify(l)},workspaceId:m,folderId:a}}),await (0,n.Tb)({data:JSON.stringify(l)},a)}if("file"==t){if(!m||!p)return;v({type:"UPDATE_FILE",payload:{file:{data:JSON.stringify(l)},workspaceId:m,folderId:p,fileId:a}}),await (0,n.Dd)({data:JSON.stringify(l)},a)}}$(!1)},850),N.emit("send-changes",e,a)};return I.on("text-change",r),I.on("selection-change",e(b.id)),()=>{I.off("text-change",r),I.off("selection-change",e),w.current&&clearTimeout(w.current)}},[I,N,a,b,L,p,m,v]),(0,l.useEffect)(()=>{if(null===I||null===N)return;let e=(e,t)=>{t===a&&I.updateContents(e)};return N.on("receive-changes",e),()=>{N.off("receive-changes",e)}},[I,N,a]),(0,l.useEffect)(()=>{if(!a||null===I)return;let e=f.channel(a);return e.on("presence",{event:"sync"},()=>{let t=e.presenceState(),a=Object.values(t).flat();if(T(a),b){let e=[];a.forEach(t=>{if(t.id!==b.id){let a=I.getModule("cursors");a.createCursor(t.id,t.email.split("@")[0],`#${Math.random().toString(16).slice(2,8)}`),e.push(a)}}),Z(e)}}).subscribe(async t=>{if("SUBSCRIBED"!==t||!b)return;let a=await (0,n.oe)(b.id);a&&e.track({id:b.id,email:b.email?.split("@")[0],avatarUrl:a.avatarUrl?f.storage.from("avatars").getPublicUrl(a.avatarUrl).data.publicUrl:""})}),()=>{f.removeChannel(e)}},[a,I,f,b]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"relative",children:[L.inTrash&&(0,r.jsxs)("article",{className:"py-2    z-40    bg-[#EB5757]    flex     md:flex-row    flex-col    justify-center    items-center    gap-4    flex-wrap",children:[(0,r.jsxs)("div",{className:"flex    flex-col    md:flex-row    gap-2    justify-center    items-center",children:[(0,r.jsxs)("span",{className:"text-white",children:["This ",t," is in the trash."]}),r.jsx(i.z,{size:"sm",variant:"outline",className:"bg-transparent   border-white   text-white   hover:bg-white   hover:text-[#EB5757]   ",onClick:G,children:"Restore"}),r.jsx(i.z,{size:"sm",variant:"outline",className:"bg-transparent   border-white   text-white   hover:bg-white   hover:text-[#EB5757]   ",onClick:V,children:"Delete"})]}),r.jsx("span",{className:"text-sm text-white",children:L.inTrash})]}),(0,r.jsxs)("div",{className:"flex    flex-col-reverse    sm:flex-row    sm:justify-between    justify-center    sm:items-center    sm:p-2    p-8",children:[r.jsx("div",{children:O}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"flex items-center justify-center h-10",children:_?.map(e=>r.jsx(d.pn,{children:r.jsxs(d.u,{children:[r.jsx(d.aJ,{asChild:!0,children:r.jsxs(c.Avatar,{className:"   -ml-3    bg-background    border-2    flex    items-center    justify-center    border-white    h-8    w-8    rounded-full   ",children:[r.jsx(c.AvatarImage,{src:e.avatarUrl?e.avatarUrl:"",className:"rounded-full"}),r.jsx(c.AvatarFallback,{children:e.email.substring(0,2).toUpperCase()})]})}),r.jsx(d._v,{children:e.email})]})},e.id))}),F?r.jsx(x,{variant:"secondary",className:"bg-orange-600 top-4   text-white   right-4   z-50   ",children:"Saving..."}):r.jsx(x,{variant:"secondary",className:"bg-emerald-600    top-4   text-white   right-4   z-50   ",children:"Saved"})]})]})]}),L.bannerUrl&&r.jsx("div",{className:"relative w-full h-[200px]",children:r.jsx(h(),{src:f.storage.from("file-banners").getPublicUrl(L.bannerUrl).data.publicUrl,fill:!0,className:"w-full md:h-48   h-20   object-cover",alt:"Banner Image"})}),(0,r.jsxs)("div",{className:"flex    justify-center   items-center   flex-col   mt-2   relative   ",children:[(0,r.jsxs)("div",{className:"w-full    self-center    max-w-[800px]    flex    flex-col   px-7    lg:my-8",children:[r.jsx("div",{className:"text-[80px]",children:r.jsx(j.Z,{getValue:M,children:r.jsx("div",{className:"w-[100px]   cursor-pointer   transition-colors   h-[100px]   flex   items-center   justify-center   hover:bg-muted   rounded-xl",children:L.iconId})})}),(0,r.jsxs)("div",{className:"flex ",children:[r.jsx(S,{id:a,dirType:t,className:"mt-2   text-sm   text-muted-foreground   p-2   hover:text-card-foreground   transition-all   rounded-md",children:L.bannerUrl?"Update Banner":"Add Banner"}),L.bannerUrl&&(0,r.jsxs)(i.z,{disabled:U,onClick:B,variant:"ghost",className:"gap-2 hover:bg-background   flex   item-center   justify-center   mt-2   text-sm   text-muted-foreground   w-36   p-2   rounded-md",children:[r.jsx(C.Z,{size:16}),r.jsx("span",{className:"whitespace-nowrap font-normal",children:"Remove Banner"})]})]}),r.jsx("span",{className:"   text-muted-foreground   text-3xl   font-bold   h-9   ",children:L.title}),r.jsx("span",{className:"text-muted-foreground text-sm",children:t.toUpperCase()})]}),r.jsx("div",{id:"container",className:"max-w-[800px]",ref:W})]})]})}},93903:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>q});var r=a(53854),s=a(34218),l=a(42416),i=a(19198),n=a(49630),o=a(51018),d=a(19066),c=a(64970),f=a(10888),u=a(2012),m=a(14024),x=a(41871),p=a(79496),h=a(85096),g=a(60254),j=a(76652),v=a(83568),w=a(68504);let b=s.forwardRef(({className:e,orientation:t="horizontal",decorative:a=!0,...s},l)=>r.jsx(v.f,{ref:l,decorative:a,orientation:t,className:(0,w.cn)("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",e),...s}));b.displayName=v.f.displayName;var y=a(99589),N=a(53110),k=a(69211),S=a(28506),C=a(38157),E=a(71242),P=a(59924);let D=E.fC;E.xz;let I=E.h_,A=s.forwardRef(({className:e,...t},a)=>r.jsx(E.aV,{className:(0,w.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:a}));A.displayName=E.aV.displayName;let _=s.forwardRef(({className:e,...t},a)=>(0,r.jsxs)(I,{children:[r.jsx(A,{}),r.jsx(E.VY,{ref:a,className:(0,w.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));_.displayName=E.VY.displayName;let T=({className:e,...t})=>r.jsx("div",{className:(0,w.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...t});T.displayName="AlertDialogHeader";let U=({className:e,...t})=>r.jsx("div",{className:(0,w.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});U.displayName="AlertDialogFooter";let R=s.forwardRef(({className:e,...t},a)=>r.jsx(E.Dx,{ref:a,className:(0,w.cn)("text-lg font-semibold",e),...t}));R.displayName=E.Dx.displayName;let F=s.forwardRef(({className:e,...t},a)=>r.jsx(E.dk,{ref:a,className:(0,w.cn)("text-sm text-muted-foreground",e),...t}));F.displayName=E.dk.displayName;let $=s.forwardRef(({className:e,...t},a)=>r.jsx(E.aU,{ref:a,className:(0,w.cn)((0,P.d)(),e),...t}));$.displayName=E.aU.displayName;let z=s.forwardRef(({className:e,...t},a)=>r.jsx(E.$j,{ref:a,className:(0,w.cn)((0,P.d)({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));z.displayName=E.$j.displayName;var Z=a(56738),L=a(1025),O=a(63301),W=a(56672),G=a(95360),V=a(75548),M=a.n(V),B=a(47312),Y=a(41956),J=a.n(Y);let q=()=>{let{toast:e}=(0,l.pm)(),{user:t,subscription:a}=(0,n.useSupabaseUser)(),{setOpen:v}=(0,B.useSubscriptionModal)(),E=(0,o.useRouter)(),I=(0,d.createClientComponentClient)(),{state:A,workspaceId:F,dispatch:V}=(0,i.useAppState)(),[Y,q]=(0,s.useState)("private"),[K,H]=(0,s.useState)([]),[Q,X]=(0,s.useState)(!1),[ee,et]=(0,s.useState)(),ea=(0,s.useRef)(),[er,es]=(0,s.useState)(!1),[el,ei]=(0,s.useState)(!1),[en,eo]=(0,s.useState)(null),[ed,ec]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=async()=>{try{if(t){let{data:e,error:a}=await I.from("users").select("avatar_url").eq("id",t.id).single();if(a)throw a;e&&ec(e.avatar_url)}}catch(e){console.error("Error fetching avatar:",e)}};e()},[t]);let ef=async()=>{if(en)try{let{data:a,error:r}=await I.storage.from("avatars").upload(`user_${t?.id}/${en.name}`,en);if(r)throw r;if(t){let{data:r,error:s}=await I.from("users").update({avatar_url:a?.path}).eq("id",t.id).single();if(s)throw s;e({title:"Success",description:"Avatar URL updated successfully"}),console.log("Avatar URL updated successfully:",r)}}catch(e){console.error("Error uploading avatarupload:",e)}},eu=async()=>{ei(!0);try{let{url:e,error:t}=await (0,w.qC)({url:"/api/create-portal-link"});window.location.assign(e)}catch(e){console.log(e),ei(!1)}ei(!1)},em=async e=>{if(F){if(a?.status!=="active"&&K.length>=2){v(!0);return}await (0,k.a4)([e],F),H([...K,e])}},ex=async e=>{F&&(1===K.length&&q("private"),await (0,k.fD)([e],F),H(K.filter(t=>t.id!==e.id)),E.refresh())},ep=async e=>{if(!F)return;let t=e.target.files?.[0];if(!t)return;let a=(0,S.Z)();es(!0);let{data:r,error:s}=await I.storage.from("workspace-logos").upload(`workspaceLogo.${a}`,t,{cacheControl:"3600",upsert:!0});s||(V({type:"UPDATE_WORKSPACE",payload:{workspace:{logo:r.path},workspaceId:F}}),await (0,k.eA)({logo:r.path},F),es(!1))},eh=async()=>{F&&(K.length>0&&await (0,k.fD)(K,F),q("private"),X(!1))};return(0,s.useEffect)(()=>{let e=A.workspaces.find(e=>e.id===F);e&&et(e)},[F,A]),(0,s.useEffect)(()=>{if(!F)return;let e=async()=>{let e=await (0,k.vW)(F);e.length&&(q("shared"),H(e))};e()},[F]),(0,r.jsxs)("div",{className:"flex gap-4 flex-col",children:[(0,r.jsxs)("p",{className:"flex items-center gap-2 mt-6",children:[r.jsx(c.Z,{size:20}),"Workspace"]}),r.jsx(b,{}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[r.jsx(y._,{htmlFor:"workspaceName",className:"text-sm text-muted-foreground",children:"Name"}),r.jsx(N.I,{name:"workspaceName",value:ee?ee.title:"",placeholder:"Workspace Name",onChange:e=>{F&&e.target.value&&(V({type:"UPDATE_WORKSPACE",payload:{workspace:{title:e.target.value},workspaceId:F}}),ea.current&&clearTimeout(ea.current),ea.current=setTimeout(async()=>{},500))}}),r.jsx(y._,{htmlFor:"workspaceLogo",className:"text-sm text-muted-foreground",children:"Workspace Logo"}),r.jsx(N.I,{name:"workspaceLogo",type:"file",accept:"image/*",placeholder:"Workspace Logo",onChange:ep,disabled:er||a?.status!=="active"}),a?.status!=="active"&&r.jsx("small",{className:"text-muted-foreground",children:"To customize your workspace, you need to be on a Pro Plan"})]}),(0,r.jsxs)(r.Fragment,{children:[r.jsx(y._,{htmlFor:"permissions",children:"Permissions"}),(0,r.jsxs)(C.Ph,{onValueChange:e=>{"private"===e?X(!0):q(e)},value:Y,children:[r.jsx(C.i4,{className:"w-full h-26 -mt-3",children:r.jsx(C.ki,{})}),r.jsx(C.Bw,{children:(0,r.jsxs)(C.DI,{children:[r.jsx(C.Ql,{value:"private",children:(0,r.jsxs)("div",{className:"p-2   flex   gap-4   justify-center   items-center   ",children:[r.jsx(f.Z,{}),(0,r.jsxs)("article",{className:"text-left flex flex-col",children:[r.jsx("span",{children:"Private"}),r.jsx("p",{children:"Your workspace is private to you. You can choose to share it later."})]})]})}),r.jsx(C.Ql,{value:"shared",children:(0,r.jsxs)("div",{className:"p-2 flex gap-4 justify-center items-center",children:[r.jsx(u.Z,{}),(0,r.jsxs)("article",{className:"text-left flex flex-col",children:[r.jsx("span",{children:"Shared"}),r.jsx("span",{children:"You can invite collaborators."})]})]})})]})})]}),"shared"===Y&&(0,r.jsxs)(r.Fragment,{children:[r.jsx(Z.Z,{existingCollaborators:K,getCollaborators:e=>{em(e)},children:(0,r.jsxs)(P.z,{type:"button",className:"text-sm mt-4",children:[r.jsx(m.Z,{}),"Add Collaborators"]})}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Collaborators ",K.length||""]}),r.jsx(L.ScrollArea,{className:"   h-[120px]   overflow-auto   w-full   rounded-md   border   border-muted-foreground/20",children:K.length?K.map(e=>(0,r.jsxs)("div",{className:"p-4 flex   justify-between   items-center   ",children:[(0,r.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,r.jsxs)(O.Avatar,{children:[r.jsx(O.AvatarImage,{src:"/avatars/7.png"}),r.jsx(O.AvatarFallback,{children:"PJ"})]}),r.jsx("div",{className:"text-sm    gap-2   text-muted-foreground   overflow-hidden      ",children:e.email})]}),r.jsx(P.z,{variant:"secondary",onClick:()=>ex(e),children:"Remove"})]},e.id)):r.jsx("div",{className:"absolute   right-0 left-0   top-0   bottom-0   flex   justify-center   items-center   ",children:r.jsx("span",{className:"text-muted-foreground text-sm",children:"You have no collaborators"})})})]})]}),(0,r.jsxs)(W.bZ,{variant:"destructive",children:[r.jsx(W.X,{children:"Warning! deleting you workspace will permanantly delete all data related to this workspace."}),r.jsx(P.z,{type:"submit",size:"sm",variant:"destructive",className:"mt-4    text-sm   bg-destructive/40    border-2    border-destructive",onClick:async()=>{F&&(await (0,k.zl)(F),e({title:"Successfully deleted your workspae"}),V({type:"DELETE_WORKSPACE",payload:F}),E.replace("/dashboard"))},children:"Delete Workspace"})]}),(0,r.jsxs)("p",{className:"flex items-center gap-2 mt-6",children:[r.jsx(x.Z,{size:20})," Profile"]}),r.jsx(b,{}),(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(O.Avatar,{children:ed?r.jsx(J(),{src:I.storage.from("avatars").getPublicUrl(ed).data.publicUrl,fill:!0,className:"w-full md:h-48   h-20   object-cover",alt:"Profile Picture"}):r.jsx(O.AvatarImage,{src:""})}),(0,r.jsxs)("div",{className:"flex flex-col ml-6",children:[r.jsx("small",{className:"text-muted-foreground cursor-not-allowed",children:t?t.email:""}),r.jsx(y._,{htmlFor:"profilePicture",className:"text-sm text-muted-foreground",children:"Profile Picture"}),r.jsx(N.I,{name:"profilePicture",type:"file",accept:"image/*",placeholder:"Profile Picture",onChange:e=>{e.target.files&&e.target.files[0]&&eo(e.target.files[0])},className:"mb-2"}),(0,r.jsxs)(P.z,{className:"mt-3",disabled:null===en,onClick:ef,children:[r.jsx(p.Z,{})," Upload"]})]})]}),(0,r.jsxs)("p",{className:"flex items-center gap-2 mt-6",children:[r.jsx(h.Z,{size:20})," Billing & Plan"]}),r.jsx(b,{}),(0,r.jsxs)("p",{className:"text-muted-foreground",children:["You are currently on a"," ",a?.status==="active"?"Pro":"Free"," Plan"]}),(0,r.jsxs)(M(),{href:"/",target:"_blank",className:"text-muted-foreground flex flex-row items-center gap-2",children:["View Plans ",r.jsx(g.Z,{size:16})]}),a?.status==="active"?r.jsx("div",{children:r.jsx(P.z,{type:"button",size:"sm",variant:"secondary",disabled:el,className:"text-sm",onClick:eu,children:"Manage Subscription"})}):r.jsx("div",{children:r.jsx(P.z,{type:"button",size:"sm",variant:"secondary",className:"text-sm",onClick:()=>v(!0),children:"Start Plan"})}),r.jsx(b,{}),r.jsx("div",{className:"ml-4",children:r.jsx(G.default,{children:(0,r.jsxs)("div",{className:"flex items-center ",children:[r.jsx(j.Z,{})," ",r.jsx("span",{className:"ml-2",children:" Logout"})]})})})]}),r.jsx(D,{open:Q,children:(0,r.jsxs)(_,{children:[(0,r.jsxs)(T,{children:[r.jsx(R,{children:"Are you sure?"}),r.jsx(W.X,{children:"Changing a Shared workspace to a Private workspace will remove all collaborators permanantly."})]}),(0,r.jsxs)(U,{children:[r.jsx(z,{onClick:()=>X(!1),children:"Cancel"}),r.jsx($,{onClick:eh,children:"Continue"})]})]})})]})}},34876:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>P});var r=a(53854),s=a(19198),l=a(34218),i=a(2978);let n=({children:e,message:t})=>r.jsx(i.pn,{children:(0,r.jsxs)(i.u,{children:[r.jsx(i.aJ,{children:e}),r.jsx(i._v,{children:t})]})});var o=a(14024),d=a(49630),c=a(28506),f=a(69211),u=a(42416),m=a(34035),x=a(11398),p=a(68504);let h=m.fC,g=l.forwardRef(({className:e,...t},a)=>r.jsx(m.ck,{ref:a,className:(0,p.cn)("border-b",e),...t}));g.displayName="AccordionItem";let j=l.forwardRef(({className:e,children:t,disabled:a,...s},l)=>r.jsx(m.h4,{className:"flex justify-between items-center",children:(0,r.jsxs)(m.xz,{ref:l,className:(0,p.cn)("flex items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...s,children:[t,!a&&r.jsx(x.Z,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));j.displayName=m.xz.displayName;let v=l.forwardRef(({className:e,children:t,...a},s)=>r.jsx(m.VY,{ref:s,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...a,children:r.jsx("div",{className:(0,p.cn)("pb-4 pt-0",e),children:t})}));v.displayName=m.VY.displayName;var w=a(51018),b=a(29395),y=a(60401),N=a(70108);let k=({title:e,id:t,listType:a,iconId:i,children:m,disabled:x,...p})=>{let{toast:h}=(0,u.pm)(),{user:S}=(0,d.useSupabaseUser)(),{state:C,dispatch:E,workspaceId:P,folderId:D}=(0,s.useAppState)(),[I,A]=(0,l.useState)(!1),_=(0,w.useRouter)(),T=(0,l.useMemo)(()=>{if("folder"===a){let a=C.workspaces.find(e=>e.id===P)?.folders.find(e=>e.id===t)?.title;return e!==a&&a?a:e}},[C,a,P,t,e]),U=(0,l.useMemo)(()=>{if("file"===a){let a=t.split("folder"),r=C.workspaces.find(e=>e.id===P)?.folders.find(e=>e.id===a[0])?.files.find(e=>e.id===a[1])?.title;return e!==r&&r?r:e}},[C,a,P,t,e]),R=(e,t)=>{"folder"===t&&_.push(`/dashboard/${P}/${e}`),"file"===t&&_.push(`/dashboard/${P}/${D}/${e.split("folder")[1]}`)},F=async()=>{if(!I)return;A(!1);let a=t.split("folder");if(a?.length===1){if(!T)return;h({title:"Success",description:"Folder title changed."}),await (0,f.Tb)({title:e},a[0])}if(2===a.length&&a[1]){if(!U)return;let{data:e,error:t}=await (0,f.Dd)({title:U},a[1]);t?h({title:"Error",variant:"destructive",description:"Could not update the title for this file"}):h({title:"Success",description:"File title changed."})}},$=async e=>{if(P&&"folder"===a){E({type:"UPDATE_FOLDER",payload:{workspaceId:P,folderId:t,folder:{iconId:e}}});let{data:a,error:r}=await (0,f.Tb)({iconId:e},t);r?h({title:"Error",variant:"destructive",description:"Could not update the emoji for this folder"}):h({title:"Success",description:"Update emoji for the folder"})}},z=async()=>{if(!S?.email||!P)return;let e=t.split("folder");if("folder"===a){E({type:"UPDATE_FOLDER",payload:{folder:{inTrash:`Deleted by ${S?.email}`},folderId:e[0],workspaceId:P}});let{data:t,error:a}=await (0,f.Tb)({inTrash:`Deleted by ${S?.email}`},e[0]);a?h({title:"Error",variant:"destructive",description:"Could not move the folder to trash"}):h({title:"Success",description:"Moved folder to trash"})}if("file"===a){E({type:"UPDATE_FILE",payload:{file:{inTrash:`Deleted by ${S?.email}`},folderId:e[0],workspaceId:P,fileId:e[1]}});let{data:t,error:a}=await (0,f.Dd)({inTrash:`Deleted by ${S?.email}`},e[1]);a?h({title:"Error",variant:"destructive",description:"Could not move the folder to trash"}):h({title:"Success",description:"Moved folder to trash"})}},Z="folder"===a,L=(0,b.Z)("dark:text-white whitespace-nowrap flex justify-between items-center w-full relative",{"group/folder":Z,"group/file":!Z}),O=(0,l.useMemo)(()=>(0,b.Z)("relative",{"border-none text-md":Z,"border-none ml-6 text-[16px] py-1":!Z}),[Z]),W=(0,l.useMemo)(()=>(0,b.Z)("h-full hidden rounded-sm absolute right-0 items-center justify-center",{"group-hover/file:block":"file"===a,"group-hover/folder:block":"folder"===a}),[Z]),G=async()=>{if(!P)return;let e={folderId:t,data:null,createdAt:new Date().toISOString(),inTrash:null,title:"Untitled",iconId:"\uD83D\uDCC4",id:(0,c.Z)(),workspaceId:P,bannerUrl:""};E({type:"ADD_FILE",payload:{file:e,folderId:t,workspaceId:P}});let{data:a,error:r}=await (0,f.cn)(e);r?h({title:"Error",variant:"destructive",description:"Could not create a file"}):h({title:"Success",description:"File created."})};return(0,r.jsxs)(g,{value:t,className:O,onClick:e=>{e.stopPropagation(),R(t,a)},children:[r.jsx(j,{id:a,className:"hover:no-underline    p-2    dark:text-muted-foreground    text-sm",disabled:"file"===a,children:(0,r.jsxs)("div",{className:L,children:[(0,r.jsxs)("div",{className:"flex    gap-4    items-center    justify-center    overflow-hidden",children:[r.jsx("div",{className:"relative",children:r.jsx(y.Z,{getValue:$,children:i})}),r.jsx("input",{type:"text",value:"folder"===a?T:U,className:(0,b.Z)("outline-none overflow-hidden w-[140px] text-Neutrals/neutrals-7",{"bg-muted cursor-text":I,"bg-transparent cursor-pointer":!I}),readOnly:!I,onDoubleClick:()=>{A(!0)},onBlur:F,onChange:"folder"===a?e=>{if(!P)return;let a=t.split("folder");1===a.length&&E({type:"UPDATE_FOLDER",payload:{folder:{title:e.target.value},folderId:a[0],workspaceId:P}})}:e=>{if(!P||!D)return;let a=t.split("folder");2===a.length&&a[1]&&E({type:"UPDATE_FILE",payload:{file:{title:e.target.value},folderId:D,workspaceId:P,fileId:a[1]}})}})]}),(0,r.jsxs)("div",{className:W,children:[r.jsx(n,{message:"Delete Folder",children:r.jsx(N.Z,{onClick:z,size:15,className:"hover:dark:text-white dark:text-Neutrals/neutrals-7 transition-colors"})}),"folder"===a&&!I&&r.jsx(n,{message:"Add File",children:r.jsx(o.Z,{onClick:G,size:15,className:"hover:dark:text-white dark:text-Neutrals/neutrals-7 transition-colors"})})]})]})}),r.jsx(v,{children:C.workspaces.find(e=>e.id===P)?.folders.find(e=>e.id===t)?.files.filter(e=>!e.inTrash).map(e=>{let a=`${t}folder${e.id}`;return r.jsx(k,{title:e.title,listType:"file",id:a,iconId:e.iconId},e.id)})})]})};var S=a(19066);let C=()=>{let e=(0,S.createClientComponentClient)(),{dispatch:t,state:a,workspaceId:r}=(0,s.useAppState)(),i=(0,w.useRouter)();return(0,l.useEffect)(()=>{let r=e.channel("db-changes").on("postgres_changes",{event:"*",schema:"public",table:"files"},async e=>{if("INSERT"===e.eventType){let{folder_id:r,workspace_id:s,id:l}=e.new;if(!a.workspaces.find(e=>e.id===s)?.folders.find(e=>e.id===r)?.files.find(e=>e.id===l)){let a={id:e.new.id,workspaceId:e.new.workspace_id,folderId:e.new.folder_id,createdAt:e.new.created_at,title:e.new.title,iconId:e.new.icon_id,data:e.new.data,inTrash:e.new.in_trash,bannerUrl:e.new.banner_url};t({type:"ADD_FILE",payload:{file:a,folderId:r,workspaceId:s}})}}else if("DELETE"===e.eventType){let r="",s="",l=a.workspaces.some(t=>t.folders.some(a=>a.files.some(l=>{if(l.id===e.old.id)return r=t.id,s=a.id,!0})));l&&r&&s&&(i.replace(`/dashboard/${r}`),t({type:"DELETE_FILE",payload:{fileId:e.old.id,folderId:s,workspaceId:r}}))}else if("UPDATE"===e.eventType){let{folder_id:r,workspace_id:s}=e.new;a.workspaces.some(a=>a.folders.some(a=>a.files.some(a=>{if(a.id===e.new.id)return t({type:"UPDATE_FILE",payload:{workspaceId:s,folderId:r,fileId:e.new.id,file:{title:e.new.title,iconId:e.new.icon_id,inTrash:e.new.in_trash}}}),!0})))}}).subscribe();return()=>{r.unsubscribe()}},[e,a,r]),null};var E=a(47312);let P=({workspaceFolders:e,workspaceId:t})=>{C();let{state:a,dispatch:i,folderId:m}=(0,s.useAppState)(),{open:x,setOpen:p}=(0,E.useSubscriptionModal)(),{toast:g}=(0,u.pm)(),[j,v]=(0,l.useState)(e),{subscription:w}=(0,d.useSupabaseUser)();(0,l.useEffect)(()=>{e.length>0&&i({type:"SET_FOLDERS",payload:{workspaceId:t,folders:e.map(e=>({...e,files:a.workspaces.find(e=>e.id===t)?.folders.find(t=>t.id===e.id)?.files||[]}))}})},[e,t]),(0,l.useEffect)(()=>{v(a.workspaces.find(e=>e.id===t)?.folders||[])},[a]);let b=async()=>{if(j.length>=3&&!w){p(!0);return}let e={data:null,id:(0,c.Z)(),createdAt:new Date().toISOString(),title:"Untitled",iconId:"\uD83D\uDCC4",inTrash:null,workspaceId:t,bannerUrl:""};i({type:"ADD_FOLDER",payload:{workspaceId:t,folder:{...e,files:[]}}});let{data:a,error:r}=await (0,f.L6)(e);r?g({title:"Error",variant:"destructive",description:"Could not create the folder"}):g({title:"Success",description:"Created folder."})},[y,N]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{N(!0)},[]),y)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex   sticky    z-20    top-0    bg-background    w-full     h-10    group/title    justify-between    items-center    pr-4    text-Neutrals/neutrals-8   ",children:[r.jsx("span",{className:"text-Neutrals-8    font-bold    text-xs",children:"FOLDERS"}),r.jsx(n,{message:"Create Folder",children:r.jsx(o.Z,{onClick:b,size:16,className:"group-hover/title:inline-block   hidden    cursor-pointer   hover:dark:text-white   "})})]}),r.jsx(h,{type:"multiple",defaultValue:[m||""],className:"pb-20",children:j.filter(e=>!e.inTrash).map(e=>r.jsx(k,{title:e.title,listType:"folder",id:e.id,iconId:e.iconId},e.id))})]}):null}},60307:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d,nativeNavigation:()=>o});var r=a(53854),s=a(29395),l=a(1559),i=a(94905),n=a(34218);let o=[{title:"Sidebar",id:"sidebar",customIcon:l.Z},{title:"Pages",id:"pages",customIcon:i.Z}],d=({children:e})=>{let[t,a]=(0,n.useState)("");return(0,r.jsxs)(r.Fragment,{children:["sidebar"===t&&r.jsx(r.Fragment,{children:e}),r.jsx("nav",{className:"bg-black/10 backdrop-blur-lg sm:hidden fixed z-50 bottom-0 right-0 left-0",children:r.jsx("ul",{className:"flex justify-between items-center p-4",children:o.map(e=>(0,r.jsxs)("li",{className:"flex items-center flex-col justify-center ",onClick:()=>{a(e.id)},children:[r.jsx(e.customIcon,{}),r.jsx("small",{className:(0,s.Z)("",{"text-muted-foreground":t!==e.id}),children:e.title})]},e.id))})})]})}},48976:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var r=a(53854),s=a(19198),l=a(34218),i=a(33988),n=a(68504);let o=l.forwardRef(({className:e,value:t,...a},s)=>r.jsx(i.fC,{ref:s,className:(0,n.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...a,children:r.jsx(i.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));o.displayName=i.fC.displayName;var d=a(52427);let c=({foldersLength:e,subscription:t})=>{let{workspaceId:a,state:i}=(0,s.useAppState)(),[n,c]=(0,l.useState)(e/3*100);return(0,l.useEffect)(()=>{let e=i.workspaces.find(e=>e.id===a)?.folders.length;void 0!==e&&c(e/3*100)},[i,a]),(0,r.jsxs)("article",{className:"mb-4 ",children:[t?.status!=="active"&&(0,r.jsxs)("div",{className:"flex gap-2 text-muted-foreground mb-2 items-center",children:[r.jsx("div",{className:"h-4 w-4",children:r.jsx(d.Z,{})}),(0,r.jsxs)("div",{className:"flex justify-between w-full items-center",children:[r.jsx("div",{className:"ml-2",children:"Free Plan "}),(0,r.jsxs)("small",{children:[n.toFixed(0),"% / 100%"]})]})]}),t?.status!=="active"&&r.jsx(o,{value:n,className:"h-1"})]})}},63273:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>D});var r=a(53854),s=a(19198),l=a(34218),i=a(19066),n=a(41956),o=a.n(n),d=a(75548),c=a.n(d);let f=({workspace:e,onClick:t})=>{let a=(0,i.createClientComponentClient)(),[s,n]=(0,l.useState)("/cypresslogo.svg");return(0,l.useEffect)(()=>{if(e.logo){let t=a.storage.from("workspace_logos").getPublicUrl(e.logo)?.data.publicUrl;n(t)}},[e]),(0,r.jsxs)(c(),{href:`/dashboard/${e.id}`,onClick:()=>{t&&t(e)},className:"flex rounded-md    hover:bg-muted    transition-all    flex-row    p-2    gap-4    justify-center    cursor-pointer    items-center    my-2",children:[r.jsx(o(),{src:s,alt:"workspace logo",width:26,height:26,objectFit:"cover"}),r.jsx("div",{className:"flex flex-col",children:r.jsx("p",{className:"text-lg w-[170px] overflow-hidden overflow-ellipsis whitespace-nowrap",children:e.title})})]})};var u=a(21111),m=a(49630),x=a(51018),p=a(99589),h=a(53110),g=a(38157),j=a(41888),v=a(10888),w=a(2012),b=a(14024),y=a(59924),N=a(28506),k=a(69211),S=a(56738),C=a(1025),E=a(63301);let P=()=>{let{user:e}=(0,m.useSupabaseUser)(),t=(0,x.useRouter)(),[a,s]=(0,l.useState)("private"),[i,n]=(0,l.useState)(""),[o,d]=(0,l.useState)([]),c=e=>{d([...o,e])},f=e=>{d(o.filter(t=>t.id!==e.id))},u=async()=>{let r=(0,N.Z)();if(e?.id){let s={data:null,createdAt:new Date().toISOString(),iconId:"\uD83D\uDE04",id:r,inTrash:"",title:i,workspaceOwner:e.id,logo:null,bannerUrl:""};"private"===a&&(await (0,k.MB)(s),t.refresh()),"shared"===a&&(await (0,k.MB)(s),await (0,k.a4)(o,r),t.refresh())}};return(0,r.jsxs)("div",{className:"flex gap-4 flex-col",children:[(0,r.jsxs)("div",{children:[r.jsx(p._,{htmlFor:"name",className:"text-sm text-muted-foreground",children:"Name"}),r.jsx("div",{className:"flex justify-center items-center gap-2",children:r.jsx(h.I,{name:"name",value:i,placeholder:"Workspace Name",onChange:e=>n(e.target.value)})})]}),(0,r.jsxs)(r.Fragment,{children:[r.jsx(p._,{htmlFor:"permission",className:"text-sm text-muted-foreground",children:"Permission"}),(0,r.jsxs)(g.Ph,{onValueChange:e=>{s(e)},defaultValue:a,children:[r.jsx(g.i4,{className:"w-full h-26 -mt-3",children:r.jsx(g.ki,{})}),r.jsx(g.Bw,{children:(0,r.jsxs)(j.DI,{children:[r.jsx(g.Ql,{value:"private",children:(0,r.jsxs)("div",{className:"p-2 flex gap-4 justify-center items-center",children:[r.jsx(v.Z,{}),(0,r.jsxs)("article",{className:"text-left flex flex-col",children:[r.jsx("span",{children:"Private"}),r.jsx("p",{children:"Your Workspace is private to you. You can choose to share it later."})]})]})}),r.jsx(g.Ql,{value:"shared",children:(0,r.jsxs)("div",{className:"p-2 flex gap-4 justify-center items-center",children:[r.jsx(w.Z,{}),(0,r.jsxs)("article",{className:"text-left flex flex-col",children:[r.jsx("span",{children:"Shared"}),r.jsx("p",{children:"You can invite collaborators for this workspace."})]})]})})]})})]})]}),"shared"===a&&(0,r.jsxs)("div",{children:[r.jsx(S.Z,{existingCollaborators:o,getCollaborators:e=>c(e),children:(0,r.jsxs)(y.z,{type:"button",className:"text-sm mt-4",children:[r.jsx(b.Z,{})," Add Collaborator"]})}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Collaborators ",o.length||""]}),r.jsx(C.ScrollArea,{className:"h-[120pc] overflow-y-scroll w-full rounded-md border border-muted-foreground/20",children:o.length?o.map(e=>(0,r.jsxs)("div",{className:"p-4 flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex gap-4 items-center ",children:[(0,r.jsxs)(E.Avatar,{children:[r.jsx(E.AvatarImage,{src:""}),r.jsx(E.AvatarFallback,{children:"PJ"})]}),r.jsx("div",{className:"text-sm gap-2 text-muted-foreground overflow-hidden overflow-ellipsis sm:w-[300px] w-[140px]",children:e.email})]}),r.jsx(y.z,{variant:"secondary",onClick:()=>f(e),children:"Remove"})]},e.id)):r.jsx("div",{className:"absolute right-0 left-0 bottom-0 flex justify-center items-center",children:r.jsx("span",{className:"text-muted-foreground text-sm",children:"You Have No Collaborators"})})})]})]}),r.jsx(y.z,{type:"button",disabled:!i||"shared"===a&&0===o.length,variant:"secondary",onClick:u,children:"Create"})]})},D=({privateWorkspaces:e,collaboratingWorkspaces:t,sharedWorkspaces:a,defaultValue:i})=>{let{dispatch:n,state:o}=(0,s.useAppState)(),[d,c]=(0,l.useState)(i),[m,x]=(0,l.useState)(!1);(0,l.useEffect)(()=>{o.workspaces.length||n({type:"SET_WORKSPACES",payload:{workspaces:[...e,...a,...t].map(e=>({...e,folders:[]}))}})},[e,t,a]);let p=e=>{c(e),x(!1)};return(0,l.useEffect)(()=>{let e=o.workspaces.find(e=>e.id===i?.id);e&&c(e)},[o,i]),(0,r.jsxs)("div",{className:"relative inline-block text-left",children:[r.jsx("div",{children:r.jsx("span",{onClick:()=>x(!m),children:d?r.jsx(f,{workspace:d}):"Select a workspace"})}),m&&r.jsx("div",{className:"origin-top-right    absolute   w-full   rounded-md   shadow-md   z-50   h-[190px]   bg-black/10   backdrop-blur-lg   group   overflow-auto   border-[1px]   border-muted   ",children:(0,r.jsxs)("div",{className:"rounded-md flex flex-col",children:[(0,r.jsxs)("div",{className:"!p-2",children:[!!e.length&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("p",{className:"text-muted-foreground ",children:"Private"}),r.jsx("hr",{}),e.map(e=>r.jsx(f,{workspace:e,onClick:p},e.id))]}),!!a.length&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("p",{className:"text-muted-foreground ",children:"Shared"}),r.jsx("hr",{}),a.map(e=>r.jsx(f,{workspace:e,onClick:p},e.id))]}),!!t.length&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("p",{className:"text-muted-foreground ",children:"Collaborating"}),r.jsx("hr",{}),t.map(e=>r.jsx(f,{workspace:e,onClick:p},e.id))]})]}),r.jsx(u.Z,{header:"Create A Workspace",content:r.jsx(P,{}),description:"Workspace give you the poewer to collaborate with others. You can change your workspace privacy settings after creating the workspace too.",children:(0,r.jsxs)("div",{className:"flex transition-all hover:bg-muted justify-center items-center gap-2 p-2 w-full",children:[r.jsx("article",{className:"text-slate-500    rounded-full   bg-slate-800    w-4    h-4    flex    items-center    justify-center",children:"+"}),"Create Workspace"]})})]})})]})}},3866:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var r=a(53854),s=a(19198),l=a(79344),i=a(21),n=a(75548),o=a.n(n),d=a(34218);let c=()=>{let{state:e,workspaceId:t}=(0,s.useAppState)(),[a,n]=(0,d.useState)([]),[c,f]=(0,d.useState)([]);return(0,d.useEffect)(()=>{let a=e.workspaces.find(e=>e.id===t)?.folders.filter(e=>e.inTrash)||[];n(a);let r=[];e.workspaces.find(e=>e.id===t)?.folders.forEach(e=>{e.files.forEach(e=>{e.inTrash&&r.push(e)})}),f(r)},[e,t]),(0,r.jsxs)("section",{children:[!!a.length&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("h3",{children:"Folders"}),a.map(e=>r.jsx(o(),{href:`/dashboard/${e.workspaceId}/${e.id}`,className:"hover:bg-muted   rounded-md   p-2   flex   items-center   justify-between   ",children:r.jsx("article",{children:(0,r.jsxs)("aside",{className:"flex items-center gap-2",children:[r.jsx(l.Z,{}),e.title]})})},e.id))]}),!!c.length&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("h3",{children:"Files"}),c.map(e=>r.jsx(o(),{href:`/dashboard/${e.workspaceId}/${e.folderId}/${e.id}`,className:"hover:bg-muted rounded-md p-2 flex items-center justify-between",children:r.jsx("article",{children:(0,r.jsxs)("aside",{children:[r.jsx(i.Z,{}),e.title]})})},e.id))]}),!c.length&&!a.length&&r.jsx("div",{className:"text-muted-foreground absolute top-[50%] left-[50%] transform -translate-x-1/2 -translate-y-1/2",children:"No Items in trash"})]})}},56672:(e,t,a)=>{"use strict";a.d(t,{Cd:()=>d,X:()=>c,bZ:()=>o});var r=a(53854),s=a(34218),l=a(82457),i=a(68504);let n=(0,l.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=s.forwardRef(({className:e,variant:t,...a},s)=>r.jsx("div",{ref:s,role:"alert",className:(0,i.cn)(n({variant:t}),e),...a}));o.displayName="Alert";let d=s.forwardRef(({className:e,...t},a)=>r.jsx("h5",{ref:a,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",e),...t}));d.displayName="AlertTitle";let c=s.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",e),...t}));c.displayName="AlertDescription"},63301:(e,t,a)=>{"use strict";a.r(t),a.d(t,{Avatar:()=>n,AvatarFallback:()=>d,AvatarImage:()=>o});var r=a(53854),s=a(34218),l=a(1783),i=a(68504);let n=s.forwardRef(({className:e,...t},a)=>r.jsx(l.fC,{ref:a,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));n.displayName=l.fC.displayName;let o=s.forwardRef(({className:e,...t},a)=>r.jsx(l.Ee,{ref:a,className:(0,i.cn)("aspect-square h-full w-full",e),...t}));o.displayName=l.Ee.displayName;let d=s.forwardRef(({className:e,...t},a)=>r.jsx(l.NY,{ref:a,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));d.displayName=l.NY.displayName},1025:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ScrollArea:()=>n,ScrollBar:()=>o});var r=a(53854),s=a(34218),l=a(76038),i=a(68504);let n=s.forwardRef(({className:e,children:t,...a},s)=>(0,r.jsxs)(l.fC,{ref:s,className:(0,i.cn)("relative overflow-hidden",e),...a,children:[r.jsx(l.l_,{className:"h-full w-full rounded-[inherit]",children:t}),r.jsx(o,{}),r.jsx(l.Ns,{})]}));n.displayName=l.fC.displayName;let o=s.forwardRef(({className:e,orientation:t="vertical",...a},s)=>r.jsx(l.gb,{ref:s,orientation:t,className:(0,i.cn)("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 border-t border-t-transparent p-[1px]",e),...a,children:r.jsx(l.q4,{className:(0,i.cn)("relative rounded-full bg-border","vertical"===t&&"flex-1")})}));o.displayName=l.gb.displayName},38157:(e,t,a)=>{"use strict";a.d(t,{Bw:()=>h,DI:()=>f,Ph:()=>c,Ql:()=>j,i4:()=>m,ki:()=>u});var r=a(53854),s=a(34218),l=a(41888),i=a(11398),n=a(18158),o=a(66802),d=a(68504);let c=l.fC,f=l.ZA,u=l.B4,m=s.forwardRef(({className:e,children:t,...a},s)=>(0,r.jsxs)(l.xz,{ref:s,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[t,r.jsx(l.JO,{asChild:!0,children:r.jsx(i.Z,{className:"h-4 w-4 opacity-50"})})]}));m.displayName=l.xz.displayName;let x=s.forwardRef(({className:e,...t},a)=>r.jsx(l.u_,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(n.Z,{className:"h-4 w-4"})}));x.displayName=l.u_.displayName;let p=s.forwardRef(({className:e,...t},a)=>r.jsx(l.$G,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(i.Z,{className:"h-4 w-4"})}));p.displayName=l.$G.displayName;let h=s.forwardRef(({className:e,children:t,position:a="popper",...s},i)=>r.jsx(l.h_,{children:(0,r.jsxs)(l.VY,{ref:i,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...s,children:[r.jsx(x,{}),r.jsx(l.l_,{className:(0,d.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),r.jsx(p,{})]})}));h.displayName=l.VY.displayName;let g=s.forwardRef(({className:e,...t},a)=>r.jsx(l.__,{ref:a,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));g.displayName=l.__.displayName;let j=s.forwardRef(({className:e,children:t,...a},s)=>(0,r.jsxs)(l.ck,{ref:s,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(l.wU,{children:r.jsx(o.Z,{className:"h-4 w-4"})})}),r.jsx(l.eT,{children:t})]}));j.displayName=l.ck.displayName;let v=s.forwardRef(({className:e,...t},a)=>r.jsx(l.Z0,{ref:a,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...t}));v.displayName=l.Z0.displayName},2978:(e,t,a)=>{"use strict";a.d(t,{_v:()=>c,aJ:()=>d,pn:()=>n,u:()=>o});var r=a(53854),s=a(34218),l=a(91456),i=a(68504);let n=l.zt,o=l.fC,d=l.xz,c=s.forwardRef(({className:e,sideOffset:t=4,...a},s)=>r.jsx(l.VY,{ref:s,sideOffset:t,className:(0,i.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a}));c.displayName=l.VY.displayName},47863:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ep});var r=a(4656),s=a(95153);let l=(0,s.createProxy)(String.raw`G:\notion\src\components\sidebar\mobile-sidebar.tsx`),{__esModule:i,$$typeof:n}=l,o=l.default;(0,s.createProxy)(String.raw`G:\notion\src\components\sidebar\mobile-sidebar.tsx#nativeNavigation`);var d=a(46813);a(3542);var c=a(24596),f=a(33359),u=a(41412),m=a(15011);let x=(0,s.createProxy)(String.raw`G:\notion\src\components\sidebar\workspace-dropdown.tsx`),{__esModule:p,$$typeof:h}=x,g=x.default,j=(0,s.createProxy)(String.raw`G:\notion\src\components\sidebar\plan-usage.tsx`),{__esModule:v,$$typeof:w}=j,b=j.default;var y=a(95695),N=a(57505),k=a(83826),S=a(24353),C=a.n(S);let E=(0,s.createProxy)(String.raw`G:\notion\src\components\ui\dialog.tsx`),{__esModule:P,$$typeof:D}=E;E.default;let I=(0,s.createProxy)(String.raw`G:\notion\src\components\ui\dialog.tsx#Dialog`);(0,s.createProxy)(String.raw`G:\notion\src\components\ui\dialog.tsx#DialogPortal`),(0,s.createProxy)(String.raw`G:\notion\src\components\ui\dialog.tsx#DialogOverlay`),(0,s.createProxy)(String.raw`G:\notion\src\components\ui\dialog.tsx#DialogClose`);let A=(0,s.createProxy)(String.raw`G:\notion\src\components\ui\dialog.tsx#DialogTrigger`),_=(0,s.createProxy)(String.raw`G:\notion\src\components\ui\dialog.tsx#DialogContent`),T=(0,s.createProxy)(String.raw`G:\notion\src\components\ui\dialog.tsx#DialogHeader`);(0,s.createProxy)(String.raw`G:\notion\src\components\ui\dialog.tsx#DialogFooter`);let U=(0,s.createProxy)(String.raw`G:\notion\src\components\ui\dialog.tsx#DialogTitle`),R=(0,s.createProxy)(String.raw`G:\notion\src\components\ui\dialog.tsx#DialogDescription`);var F=a(35143);let $=({header:e,content:t,children:a,description:s,className:l})=>(0,r.jsxs)(I,{children:[r.jsx(A,{className:(0,F.Z)("",l),children:a}),(0,r.jsxs)(_,{className:"h-screen block sm:h-[440px] w-full overflow-scroll",children:[(0,r.jsxs)(T,{children:[r.jsx(U,{children:e}),r.jsx(R,{children:s})]}),t]})]}),z=(0,s.createProxy)(String.raw`G:\notion\src\components\settings\settings-form.tsx`),{__esModule:Z,$$typeof:L}=z,O=z.default,W=({children:e})=>r.jsx($,{header:"Settings",content:r.jsx(O,{}),children:e}),G=(0,s.createProxy)(String.raw`G:\notion\src\components\trash\trash-restore.tsx`),{__esModule:V,$$typeof:M}=G,B=G.default,Y=({children:e})=>r.jsx($,{header:"Trash",content:r.jsx(B,{}),children:e}),J=({myWorkspaceId:e,className:t})=>r.jsx("nav",{className:(0,m.m6)("my-2",t),children:(0,r.jsxs)("ul",{className:"flex flex-col gap-2",children:[r.jsx("li",{children:(0,r.jsxs)(C(),{className:"group/native flex text-Neutrals/neutrals-7 transition-all gap-2",href:`/dashboard/${e}`,children:[r.jsx(y.Z,{}),r.jsx("span",{children:"My Workspace"})]})}),r.jsx(W,{children:(0,r.jsxs)("li",{className:"group/native flex text-Neutrals/neutrals-7 transition-all cursor-pointer gap-2",children:[r.jsx(N.Z,{}),r.jsx("span",{children:"Settings"})]})}),r.jsx(Y,{children:(0,r.jsxs)("li",{className:"group/native flex text-Neutrals/neutrals-7 transition-all gap-2",children:[r.jsx(k.Z,{}),r.jsx("span",{className:"ml-1",children:"Trash"})]})})]})}),q=(0,s.createProxy)(String.raw`G:\notion\src\components\ui\scroll-area.tsx`),{__esModule:K,$$typeof:H}=q;q.default;let Q=(0,s.createProxy)(String.raw`G:\notion\src\components\ui\scroll-area.tsx#ScrollArea`);(0,s.createProxy)(String.raw`G:\notion\src\components\ui\scroll-area.tsx#ScrollBar`);let X=(0,s.createProxy)(String.raw`G:\notion\src\components\sidebar\folders-dropdown-list.tsx`),{__esModule:ee,$$typeof:et}=X,ea=X.default;var er=a(48386);let es=(0,s.createProxy)(String.raw`G:\notion\src\components\global\logout-button.tsx`),{__esModule:el,$$typeof:ei}=es,en=es.default;var eo=a(19549);let ed=(0,s.createProxy)(String.raw`G:\notion\src\components\global\mode-toggle.tsx`),{__esModule:ec,$$typeof:ef}=ed,eu=ed.default,em=async({subscription:e})=>{let t;let a=(0,d.createServerComponentClient)({cookies:c.cookies}),{data:{user:s}}=await a.auth.getUser();if(!s)return;let l=await er.Z.query.users.findFirst({where:(e,{eq:t})=>t(e.id,s.id)});if(!l)return;t=l.avatarUrl?a.storage.from("avatars").getPublicUrl(l.avatarUrl).data.publicUrl:"";let i={...l,avatarPath:t};return(0,r.jsxs)("article",{className:"hidden   sm:flex   justify-center   items-center   px-4   py-2   dark:bg-Neutrals/neutrals-12   rounded-3xl   ",children:[r.jsx("aside",{className:"flex justify-center items-center gap-2",children:(0,r.jsxs)("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-muted-foreground",children:e?.status==="active"?"Pro Plan":"Free Plan"}),r.jsx("small",{className:"w-[100px]   overflow-hidden   overflow-ellipsis   ",children:i.email})]})}),(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[r.jsx(en,{children:r.jsx(eo.Z,{})}),r.jsx(eu,{})]})]})},ex=async({params:e,className:t})=>{let a=(0,d.createServerComponentClient)({cookies:c.cookies}),{data:{user:s}}=await a.auth.getUser();if(!s)return;let{data:l,error:i}=await (0,f.getUserSubscriptionStatus)(s.id),{data:n,error:o}=await (0,f.getFolders)(e.workspaceId);(i||o)&&(0,u.redirect)("/dashboard");let[x,p,h]=await Promise.all([(0,f.getPrivateWorkspace)(s.id),(0,f.getCollaboratingWorkspaces)(s.id),(0,f.getSharedWorkspaces)(s.id)]);return(0,r.jsxs)("aside",{className:(0,m.m6)("hidden sm:flex sm:flex-col w-[280px] shrink-0 p-4 md:gap-4 !justify-between",t),children:[r.jsx(g,{privateWorkspaces:x,collaboratingWorkspaces:p,sharedWorkspaces:h,defaultValue:[...x,...p,...h].find(t=>t.id===e.workspaceId)}),r.jsx(b,{foldersLength:n?.length||0,subscription:l}),r.jsx(J,{myWorkspaceId:e.workspaceId}),(0,r.jsxs)(Q,{className:"relative h-[450px]",children:[r.jsx("div",{className:"pointer-events-none    w-full    absolute    bottom-0    h-20    bg-gradient-to-t    from-background    to-transparent    z-40"}),r.jsx(ea,{workspaceFolders:n||[],workspaceId:e.workspaceId})]}),r.jsx(em,{subscription:l})]})},ep=({children:e,params:t})=>(0,r.jsxs)("main",{className:"flex overflow-hidden h-screen w-screen",children:[r.jsx(ex,{params:t}),r.jsx(o,{children:r.jsx(ex,{params:t,className:"w-screen inline-block sm:hidden"})}),r.jsx("div",{className:"dark:border-Neutrals/neutrals-12/70   border-l-[1px]   w-full   relative   overflow-auto   ",children:e})]})},99387:(e,t,a)=>{"use strict";a.d(t,{ZP:()=>o});var r=a(95153);let s=(0,r.createProxy)(String.raw`G:\notion\src\components\quill-editor\quill-editor.tsx`),{__esModule:l,$$typeof:i}=s,n=s.default,o=n}};