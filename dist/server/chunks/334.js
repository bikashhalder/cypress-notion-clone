exports.id=334,exports.ids=[334],exports.modules={5740:(e,a,r)=>{let t={a2d4ea10404f44a150e4c7c1ab021f369fbf21e0:()=>Promise.resolve().then(r.bind(r,33359)).then(e=>e.addCollaborators),"847a8ef020990095f03fc54601460ec72777b66c":()=>Promise.resolve().then(r.bind(r,33359)).then(e=>e.getFolderDetails),d643431fc06c5cc4ba5ca3d71aef88824802032b:()=>Promise.resolve().then(r.bind(r,33359)).then(e=>e.getSharedWorkspaces),bf13edd666219981da2d2ad51cac7537023d1d90:()=>Promise.resolve().then(r.bind(r,33359)).then(e=>e.getFiles),"1d7956b46734ac5762684d2906bb4ecb9e7afc96":()=>Promise.resolve().then(r.bind(r,33359)).then(e=>e.getUserFromSearch),"05748815d7a50bb0da1dd63e2e666ca8430be215":()=>Promise.resolve().then(r.bind(r,33359)).then(e=>e.findUser),"417b18ab59f27cadda6a49c7b96e769adca685b7":()=>Promise.resolve().then(r.bind(r,33359)).then(e=>e.getPrivateWorkspace),"1f35766a2c7399231db38ff7e71d889523e35320":()=>Promise.resolve().then(r.bind(r,33359)).then(e=>e.removeCollaborators),"4e60e9c17aa85b5e328f6db15ff1dec244d6afb2":()=>Promise.resolve().then(r.bind(r,33359)).then(e=>e.getFileDetails),"453834eaf571f615d95d1dc2663c8f75db24fe49":()=>Promise.resolve().then(r.bind(r,33359)).then(e=>e.getWorkspaceDetails),"45296063453c47b2d59b262faee8cdb4b9615201":()=>Promise.resolve().then(r.bind(r,33359)).then(e=>e.updateFolder),d016c8e248949cf0e0679cea37a599b256564949:()=>Promise.resolve().then(r.bind(r,33359)).then(e=>e.updateFile),f1c4575f1aa04b0b171265e1a582eaa946f577a8:()=>Promise.resolve().then(r.bind(r,33359)).then(e=>e.deleteWorkspace),"079e33a7786d357bf8b15353b8dee8f948ebd93b":()=>Promise.resolve().then(r.bind(r,33359)).then(e=>e.deleteFolder),d79fda52b74c10070baeb50e62e519b3ba4ea129:()=>Promise.resolve().then(r.bind(r,33359)).then(e=>e.createWorkspace),"2c6a85d56141f1302f550bf73641f1bb437f8c30":()=>Promise.resolve().then(r.bind(r,33359)).then(e=>e.getUserSubscriptionStatus),"0f13f0cd8d72390a7469a60f7d29f257096024cb":()=>Promise.resolve().then(r.bind(r,33359)).then(e=>e.getCollaboratingWorkspaces),b67d2b8528a174e713442eac3b93e4e40ddf2151:()=>Promise.resolve().then(r.bind(r,33359)).then(e=>e.createFile),fca7d3ede7a1acca1350701808fdd80e09ceec6e:()=>Promise.resolve().then(r.bind(r,33359)).then(e=>e.getActiveProductWithPrice),f46303b3608098cba15a480ceec93690bfc2435d:()=>Promise.resolve().then(r.bind(r,33359)).then(e=>e.getFolders),"23d258b4a0ed2cd54c2684f72dd9708f858897ed":()=>Promise.resolve().then(r.bind(r,33359)).then(e=>e.updateWorkspace),d09f14ac4ef39816839c0413ba841e2c9f00f930:()=>Promise.resolve().then(r.bind(r,33359)).then(e=>e.deleteFile),"4af80a06816005e931cd7f0ead5a1e93455a28fc":()=>Promise.resolve().then(r.bind(r,33359)).then(e=>e.getCollaborators),"4a2cab8d48c7ab565dc194d925837c9af8e41d45":()=>Promise.resolve().then(r.bind(r,33359)).then(e=>e.createFolder)};async function d(e,...a){let r=await t[e]();return r.apply(null,a)}e.exports={a2d4ea10404f44a150e4c7c1ab021f369fbf21e0:d.bind(null,"a2d4ea10404f44a150e4c7c1ab021f369fbf21e0"),"847a8ef020990095f03fc54601460ec72777b66c":d.bind(null,"847a8ef020990095f03fc54601460ec72777b66c"),d643431fc06c5cc4ba5ca3d71aef88824802032b:d.bind(null,"d643431fc06c5cc4ba5ca3d71aef88824802032b"),bf13edd666219981da2d2ad51cac7537023d1d90:d.bind(null,"bf13edd666219981da2d2ad51cac7537023d1d90"),"1d7956b46734ac5762684d2906bb4ecb9e7afc96":d.bind(null,"1d7956b46734ac5762684d2906bb4ecb9e7afc96"),"05748815d7a50bb0da1dd63e2e666ca8430be215":d.bind(null,"05748815d7a50bb0da1dd63e2e666ca8430be215"),"417b18ab59f27cadda6a49c7b96e769adca685b7":d.bind(null,"417b18ab59f27cadda6a49c7b96e769adca685b7"),"1f35766a2c7399231db38ff7e71d889523e35320":d.bind(null,"1f35766a2c7399231db38ff7e71d889523e35320"),"4e60e9c17aa85b5e328f6db15ff1dec244d6afb2":d.bind(null,"4e60e9c17aa85b5e328f6db15ff1dec244d6afb2"),"453834eaf571f615d95d1dc2663c8f75db24fe49":d.bind(null,"453834eaf571f615d95d1dc2663c8f75db24fe49"),"45296063453c47b2d59b262faee8cdb4b9615201":d.bind(null,"45296063453c47b2d59b262faee8cdb4b9615201"),d016c8e248949cf0e0679cea37a599b256564949:d.bind(null,"d016c8e248949cf0e0679cea37a599b256564949"),f1c4575f1aa04b0b171265e1a582eaa946f577a8:d.bind(null,"f1c4575f1aa04b0b171265e1a582eaa946f577a8"),"079e33a7786d357bf8b15353b8dee8f948ebd93b":d.bind(null,"079e33a7786d357bf8b15353b8dee8f948ebd93b"),d79fda52b74c10070baeb50e62e519b3ba4ea129:d.bind(null,"d79fda52b74c10070baeb50e62e519b3ba4ea129"),"2c6a85d56141f1302f550bf73641f1bb437f8c30":d.bind(null,"2c6a85d56141f1302f550bf73641f1bb437f8c30"),"0f13f0cd8d72390a7469a60f7d29f257096024cb":d.bind(null,"0f13f0cd8d72390a7469a60f7d29f257096024cb"),b67d2b8528a174e713442eac3b93e4e40ddf2151:d.bind(null,"b67d2b8528a174e713442eac3b93e4e40ddf2151"),fca7d3ede7a1acca1350701808fdd80e09ceec6e:d.bind(null,"fca7d3ede7a1acca1350701808fdd80e09ceec6e"),f46303b3608098cba15a480ceec93690bfc2435d:d.bind(null,"f46303b3608098cba15a480ceec93690bfc2435d"),"23d258b4a0ed2cd54c2684f72dd9708f858897ed":d.bind(null,"23d258b4a0ed2cd54c2684f72dd9708f858897ed"),d09f14ac4ef39816839c0413ba841e2c9f00f930:d.bind(null,"d09f14ac4ef39816839c0413ba841e2c9f00f930"),"4af80a06816005e931cd7f0ead5a1e93455a28fc":d.bind(null,"4af80a06816005e931cd7f0ead5a1e93455a28fc"),"4a2cab8d48c7ab565dc194d925837c9af8e41d45":d.bind(null,"4a2cab8d48c7ab565dc194d925837c9af8e41d45")}},15005:(e,a,r)=>{Promise.resolve().then(r.bind(r,47312))},99615:(e,a,r)=>{"use strict";r.d(a,{Z:()=>d});var t=r(53854);r(34218);let d=()=>t.jsx("div",{role:"status",children:(0,t.jsxs)("svg",{"aria-hidden":"true",className:"inline w-8 h-8 mr-2 text-gray-200 animate-spin dark:text-primary-foreground/30 fill-primary-foreground ",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),t.jsx("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]})})},60401:(e,a,r)=>{"use strict";r.d(a,{Z:()=>b});var t=r(53854),d=r(8465),o=r.n(d),n=r(51018),l=r(34218),s=r(69570),c=r(68504);let i=s.fC,f=s.xz,u=l.forwardRef(({className:e,align:a="center",sideOffset:r=4,...d},o)=>t.jsx(s.h_,{children:t.jsx(s.VY,{ref:o,align:a,sideOffset:r,className:(0,c.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...d})}));u.displayName=s.VY.displayName;let b=({children:e,getValue:a})=>{(0,n.useRouter)();let d=o()(()=>r.e(821).then(r.bind(r,65821)),{loadableGenerated:{modules:["..\\components\\global\\emoji-picker.tsx -> emoji-picker-react"]}}),[s,c]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{c(!0)},[]),s)?t.jsx("div",{className:"flex items-center",children:(0,t.jsxs)(i,{children:[t.jsx(f,{className:"cursor-pointer",children:e}),t.jsx(u,{className:"p-0 border-none",children:t.jsx(d,{onEmojiClick:e=>{a&&a(e.emoji)}})})]})}):null}},59924:(e,a,r)=>{"use strict";r.d(a,{d:()=>f,z:()=>u});var t=r(53854),d=r(34218),o=r(15001),n=r(82457),l=r(68504),s=r(41956),c=r.n(s),i=r(1088);let f=(0,n.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:" whitespace-nowrap bg-primary text-lg text-primary-foreground shadow-2xl shadow-indigo-600/50 rounded-lg ",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline","btn-primary":" whitespace-nowrap hover:text-primary-foreground dark:bg-gradient-to-t dark:from-[#24232C] dark:to-[#100F18] dark:text-primary-foreground border hover:border-primary dark:border-[#464553] dark:hover:bg-accent hover:bg-primary dark:hover:border-muted-foreground text-lg font-normal","btn-secondary":"whitespace-nowrap dark:text-primary-foreground text-lg font-normal"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=d.forwardRef(({className:e,variant:a,icon:r,logoStyles:d,size:n,children:s,asChild:u=!1,...b},p)=>(u&&o.g7,u)?t.jsx(o.g7,{className:(0,l.cn)(f({variant:a,size:n,className:e})),ref:p,...b}):(0,t.jsxs)("button",{className:(0,l.cn)(f({variant:a,size:n,className:e})),ref:p,...b,children:[r&&t.jsx(c(),{src:r,alt:"icon",className:((0,i.m6)("mr-2"),d),width:30}),s]}));u.displayName="Button"},88521:(e,a,r)=>{"use strict";r.r(a),r.d(a,{Dialog:()=>s,DialogClose:()=>f,DialogContent:()=>b,DialogDescription:()=>w,DialogFooter:()=>m,DialogHeader:()=>p,DialogOverlay:()=>u,DialogPortal:()=>i,DialogTitle:()=>h,DialogTrigger:()=>c});var t=r(53854),d=r(34218),o=r(44746),n=r(74920),l=r(68504);let s=o.fC,c=o.xz,i=o.h_,f=o.x8,u=d.forwardRef(({className:e,...a},r)=>t.jsx(o.aV,{ref:r,className:(0,l.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a}));u.displayName=o.aV.displayName;let b=d.forwardRef(({className:e,children:a,...r},d)=>(0,t.jsxs)(i,{children:[t.jsx(u,{}),(0,t.jsxs)(o.VY,{ref:d,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[a,(0,t.jsxs)(o.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[t.jsx(n.Z,{className:"h-4 w-4"}),t.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));b.displayName=o.VY.displayName;let p=({className:e,...a})=>t.jsx("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...a});p.displayName="DialogHeader";let m=({className:e,...a})=>t.jsx("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...a});m.displayName="DialogFooter";let h=d.forwardRef(({className:e,...a},r)=>t.jsx(o.Dx,{ref:r,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",e),...a}));h.displayName=o.Dx.displayName;let w=d.forwardRef(({className:e,...a},r)=>t.jsx(o.dk,{ref:r,className:(0,l.cn)("text-sm text-muted-foreground",e),...a}));w.displayName=o.dk.displayName},53110:(e,a,r)=>{"use strict";r.d(a,{I:()=>n});var t=r(53854),d=r(34218),o=r(68504);let n=d.forwardRef(({className:e,type:a,...r},d)=>t.jsx("input",{type:a,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:d,...r}));n.displayName="Input"},99589:(e,a,r)=>{"use strict";r.d(a,{_:()=>c});var t=r(53854),d=r(34218),o=r(93937),n=r(82457),l=r(68504);let s=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=d.forwardRef(({className:e,...a},r)=>t.jsx(o.f,{ref:r,className:(0,l.cn)(s(),e),...a}));c.displayName=o.f.displayName},47312:(e,a,r)=>{"use strict";let t;r.r(a),r.d(a,{SubscriptionModalProvider:()=>g,useSubscriptionModal:()=>w});var d=r(53854),o=r(34218),n=r.n(o),l=r(88521),s=r(49630),c=r(68504),i=r(59924),f=r(99615),u=r(42416),b=r(45252);let p=()=>(t||(t=(0,b.J)("pk_test_51MX5qySCHrKntgUdOMHZP4XqQVLH9skOO4V4RxkYwOD4YexZb7c7ZXOuSTmIN1GaCQdDUE8uz0euuUCidAnBhwi700WCMffU8R")),t),m=({products:e})=>{let{open:a,setOpen:r}=w(),{toast:t}=(0,u.pm)(),{subscription:b}=(0,s.useSupabaseUser)(),[m,h]=(0,o.useState)(!1),{user:g}=(0,s.useSupabaseUser)();console.log("products",e);let y=async e=>{try{if(h(!0),!g){t({title:"You must be logged in"}),h(!1);return}if(b){t({title:"Already on a paid plan"}),h(!1);return}let{sessionId:a}=await (0,c.qC)({url:"/api/create-checkout-session",data:{price:e}});console.log("Getting Checkout for stripe");let r=await p();r?.redirectToCheckout({sessionId:a})}catch(e){t({title:"Oppse! Something went wrong.",variant:"destructive"})}finally{h(!1)}};return d.jsx(l.Dialog,{open:a,onOpenChange:r,children:b?.status==="active"?d.jsx(l.DialogContent,{children:"Already on a paid plan!"}):(0,d.jsxs)(l.DialogContent,{children:[d.jsx(l.DialogHeader,{children:d.jsx(l.DialogTitle,{children:"Upgrade to a Pro Plan"})}),d.jsx(l.DialogDescription,{children:"To access Pro features you need to have a paid plan."}),e.length?e.map(e=>d.jsx("div",{className:"   flex   justify-between   items-center   ",children:e.prices?.map(e=>d.jsxs(n().Fragment,{children:[d.jsxs("b",{className:"text-3xl text-foreground",children:[c.T4(e)," / ",d.jsx("small",{children:e.interval})]}),d.jsx(i.z,{onClick:()=>y(e),disabled:m,children:m?d.jsx(f.Z,{}):"Upgrade âœ¨"})]},e.id))},e.id)):""]})})},h=(0,o.createContext)({open:!1,setOpen:()=>{}}),w=()=>(0,o.useContext)(h),g=({children:e,products:a})=>{let[r,t]=(0,o.useState)(!1);return(0,d.jsxs)(h.Provider,{value:{open:r,setOpen:t},children:[e,d.jsx(m,{products:a})]})}},54378:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>f});var t=r(4656),d=r(95153);let o=(0,d.createProxy)(String.raw`G:\notion\src\lib\providers\subscription-modal-provider.tsx`),{__esModule:n,$$typeof:l}=o;o.default,(0,d.createProxy)(String.raw`G:\notion\src\lib\providers\subscription-modal-provider.tsx#useSubscriptionModal`);let s=(0,d.createProxy)(String.raw`G:\notion\src\lib\providers\subscription-modal-provider.tsx#SubscriptionModalProvider`);var c=r(33359);r(3542);let i=async({children:e,params:a})=>{let{data:r,error:d}=await (0,c.getActiveProductWithPrice)();return t.jsx("main",{className:"flex overflow-hidden h-screen",children:t.jsx(s,{products:r,children:e})})},f=i},33359:(e,a,r)=>{"use strict";r.r(a),r.d(a,{addCollaborators:()=>D,createFile:()=>F,createFolder:()=>A,createWorkspace:()=>v,deleteFile:()=>E,deleteFolder:()=>B,deleteWorkspace:()=>_,findUser:()=>W,getActiveProductWithPrice:()=>R,getCollaboratingWorkspaces:()=>P,getCollaborators:()=>V,getFileDetails:()=>L,getFiles:()=>N,getFolderDetails:()=>O,getFolders:()=>j,getPrivateWorkspace:()=>C,getSharedWorkspaces:()=>U,getUserFromSearch:()=>I,getUserSubscriptionStatus:()=>k,getWorkspaceDetails:()=>S,removeCollaborators:()=>Z,updateFile:()=>T,updateFolder:()=>q,updateWorkspace:()=>z});var t=r(34600);r(99195);var d=r(20632),o=r(48386),n=r(26504),l=r(50161),s=r(92407),c=r(73734),i=r(33789),f=r(63750),u=r(45191),b=r(10009),p=r(55390),m=r(50091),h=r(54277);let w=(0,s.af)("workspaces",{id:(0,c.Vj)("id").defaultRandom().primaryKey().notNull(),createdAt:(0,i.AB)("created_at",{withTimezone:!0,mode:"string"}).defaultNow().notNull(),workspaceOwner:(0,c.Vj)("workspace_owner").notNull(),title:(0,f.fL)("title").notNull(),iconId:(0,f.fL)("icon_id").notNull(),data:(0,f.fL)("data"),inTrash:(0,f.fL)("in_Trash"),logo:(0,f.fL)("logo"),bannerUrl:(0,f.fL)("banner_url")}),g=(0,s.af)("folders",{id:(0,c.Vj)("id").defaultRandom().primaryKey().notNull(),createdAt:(0,i.AB)("created_at",{withTimezone:!0,mode:"string"}).defaultNow().notNull(),title:(0,f.fL)("title").notNull(),iconId:(0,f.fL)("icon_id").notNull(),data:(0,f.fL)("data"),inTrash:(0,f.fL)("in_Trash"),bannerUrl:(0,f.fL)("banner_url"),workspaceId:(0,c.Vj)("workspace_id").notNull().references(()=>w.id,{onDelete:"cascade"})});(0,s.af)("files",{id:(0,c.Vj)("id").defaultRandom().primaryKey().notNull(),createdAt:(0,i.AB)("created_at",{withTimezone:!0,mode:"string"}).defaultNow().notNull(),title:(0,f.fL)("title").notNull(),iconId:(0,f.fL)("icon_id").notNull(),data:(0,f.fL)("data"),inTrash:(0,f.fL)("in_Trash"),bannerUrl:(0,f.fL)("banner_url"),workspaceId:(0,c.Vj)("workspace_id").notNull().references(()=>w.id,{onDelete:"cascade"}),folderId:(0,c.Vj)("folder_id").notNull().references(()=>g.id,{onDelete:"cascade"})}),(0,s.af)("subscriptions",{id:(0,f.fL)("id").primaryKey().notNull(),userId:(0,c.Vj)("user_id").notNull(),status:(0,n.subscriptionStatus)("status"),metadata:(0,u.JB)("metadata"),priceId:(0,f.fL)("price_id").references(()=>n.prices.id),quantity:(0,b._L)("quantity"),cancelAtPeriodEnd:(0,p.O7)("cancel_at_period_end"),created:(0,i.AB)("created",{withTimezone:!0,mode:"string"}).default(m.i6`now()`).notNull(),currentPeriodStart:(0,i.AB)("current_period_start",{withTimezone:!0,mode:"string"}).default(m.i6`now()`).notNull(),currentPeriodEnd:(0,i.AB)("current_period_end",{withTimezone:!0,mode:"string"}).default(m.i6`now()`).notNull(),endedAt:(0,i.AB)("ended_at",{withTimezone:!0,mode:"string"}).default(m.i6`now()`),cancelAt:(0,i.AB)("cancel_at",{withTimezone:!0,mode:"string"}).default(m.i6`now()`),canceledAt:(0,i.AB)("canceled_at",{withTimezone:!0,mode:"string"}).default(m.i6`now()`),trialStart:(0,i.AB)("trial_start",{withTimezone:!0,mode:"string"}).default(m.i6`now()`),trialEnd:(0,i.AB)("trial_end",{withTimezone:!0,mode:"string"}).default(m.i6`now()`)});let y=(0,s.af)("collaborators",{id:(0,c.Vj)("id").defaultRandom().primaryKey().notNull(),workspaceId:(0,c.Vj)("workspace_id").notNull().references(()=>w.id,{onDelete:"cascade"}),cancelAt:(0,i.AB)("cancel_at",{withTimezone:!0,mode:"string"}).defaultNow().notNull(),userId:(0,c.Vj)("user_id").notNull().references(()=>n.users.id,{onDelete:"cascade"})});(0,h.lE)(n.products,({many:e})=>({prices:e(n.prices)})),(0,h.lE)(n.prices,({one:e})=>({product:e(n.products,{fields:[n.prices.productId],references:[n.products.id]})}));var x=r(82990);let k=async e=>{try{let a=await o.Z.query.subscriptions.findFirst({where:(a,{eq:r})=>r(a.userId,e)});if(a)return{data:a,error:null};return{data:null,error:null}}catch(e){return console.log(e),{data:null,error:`Error ${e}`}}},v=async e=>{try{return await o.Z.insert(n.workspaces).values(e),{data:null,error:null}}catch(e){return console.log(e),{data:null,error:"Error"}}},N=async e=>{let a=(0,d.Z)(e);if(!a)return{data:null,error:"Error"};try{let a=await o.Z.select().from(n.files).orderBy(n.files.createdAt).where((0,l.eq)(n.files.folderId,e));return{data:a,error:null}}catch(e){return console.log(e),{data:null,error:"Error"}}},j=async e=>{let a=(0,d.Z)(e);if(!a)return{data:null,error:"Error"};try{let a=await o.Z.select().from(n.folders).orderBy(n.folders.createdAt).where((0,l.eq)(n.folders.workspaceId,e));return{data:a,error:null}}catch(e){return console.log(e),{data:null,error:"Error"}}},C=async e=>{if(!e)return[];let a=await o.Z.select({id:n.workspaces.id,createdAt:n.workspaces.createdAt,workspaceOwner:n.workspaces.workspaceOwner,title:n.workspaces.title,iconId:n.workspaces.iconId,data:n.workspaces.data,inTrash:n.workspaces.inTrash,logo:n.workspaces.logo,bannerUrl:n.workspaces.bannerUrl}).from(n.workspaces).where((0,l.xD)((0,l.UN)(o.Z.select().from(y).where((0,l.eq)(y.workspaceId,n.workspaces.id))),(0,l.eq)(n.workspaces.workspaceOwner,e)));return a},P=async e=>{if(!e)return[];let a=await o.Z.select({id:n.workspaces.id,createdAt:n.workspaces.createdAt,workspaceOwner:n.workspaces.workspaceOwner,title:n.workspaces.title,iconId:n.workspaces.iconId,data:n.workspaces.data,inTrash:n.workspaces.inTrash,logo:n.workspaces.logo,bannerUrl:n.workspaces.bannerUrl}).from(n.users).innerJoin(y,(0,l.eq)(n.users.id,y.userId)).innerJoin(n.workspaces,(0,l.eq)(y.workspaceId,n.workspaces.id)).where((0,l.eq)(n.users.id,e));return a},U=async e=>{if(!e)return[];let a=await o.Z.selectDistinct({id:n.workspaces.id,createdAt:n.workspaces.createdAt,workspaceOwner:n.workspaces.workspaceOwner,title:n.workspaces.title,iconId:n.workspaces.iconId,data:n.workspaces.data,inTrash:n.workspaces.inTrash,logo:n.workspaces.logo,bannerUrl:n.workspaces.bannerUrl}).from(n.workspaces).orderBy(n.workspaces.createdAt).innerJoin(y,(0,l.eq)(n.workspaces.id,y.workspaceId)).where((0,l.eq)(n.workspaces.workspaceOwner,e));return a},D=async(e,a)=>{e.forEach(async e=>{let r=await o.Z.query.collaborators.findFirst({where:(r,{eq:t})=>(0,l.xD)(t(r.userId,e.id),t(r.workspaceId,a))});r||await o.Z.insert(y).values({workspaceId:a,userId:e.id})})},Z=async(e,a)=>{e.forEach(async e=>{let r=await o.Z.query.collaborators.findFirst({where:(r,{eq:t})=>(0,l.xD)(t(r.userId,e.id),t(r.workspaceId,a))});r&&await o.Z.delete(y).where((0,l.xD)((0,l.eq)(y.workspaceId,a),(0,l.eq)(y.userId,e.id)))})},_=async e=>{e&&await o.Z.delete(n.workspaces).where((0,l.eq)(n.workspaces.id,e))},I=async e=>{if(!e)return[];let a=o.Z.select().from(n.users).where((0,l.o$)(n.users.email,`${e}%`));return a},A=async e=>{try{return await o.Z.insert(n.folders).values(e),{data:null,error:null}}catch(e){return console.log(e),{data:null,error:"Error"}}},q=async(e,a)=>{try{return await o.Z.update(n.folders).set(e).where((0,l.eq)(n.folders.id,a)),{data:null,error:null}}catch(e){return console.log(e),{data:null,error:"Error"}}},F=async e=>{try{return await o.Z.insert(n.files).values(e),{data:null,error:null}}catch(e){return{data:null,error:"Error"}}},T=async(e,a)=>{try{return await o.Z.update(n.files).set(e).where((0,l.eq)(n.files.id,a)),{data:null,error:null}}catch(e){return console.log(e),{data:null,error:"Error"}}},z=async(e,a)=>{if(a)try{return await o.Z.update(n.workspaces).set(e).where((0,l.eq)(n.workspaces.id,a)),{data:null,error:null}}catch(e){return console.log(e),{data:null,error:"Error"}}},S=async e=>{let a=(0,d.Z)(e);if(!a)return{data:[],error:"Error"};try{let a=await o.Z.select().from(n.workspaces).where((0,l.eq)(n.workspaces.id,e)).limit(1);return{data:a,error:null}}catch(e){return console.log(e),{data:null,error:"Error"}}},E=async e=>{e&&await o.Z.delete(n.files).where((0,l.eq)(n.files.id,e))},B=async e=>{e&&await o.Z.delete(n.folders).where((0,l.eq)(n.folders.id,e))},L=async e=>{(0,d.Z)(e);try{let a=await o.Z.select().from(n.files).where((0,l.eq)(n.files.id,e)).limit(1);return{data:a,error:null}}catch(e){return console.log("\uD83D\uDD34Error",e),{data:[],error:"Error"}}},O=async e=>{(0,d.Z)(e);try{let a=await o.Z.select().from(n.folders).where((0,l.eq)(n.folders.id,e)).limit(1);return{data:a,error:null}}catch(e){return{data:[],error:"Error"}}},V=async e=>{let a=await o.Z.select().from(y).where((0,l.eq)(y.workspaceId,e));if(!a.length)return[];let r=a.map(async e=>{let a=await o.Z.query.users.findFirst({where:(a,{eq:r})=>r(a.id,e.userId)});return a}),t=await Promise.all(r);return t.filter(Boolean)},W=async e=>{let a=await o.Z.query.users.findFirst({where:(a,{eq:r})=>r(a.id,e)});return a},R=async()=>{try{let e=await o.Z.query.products.findMany({where:(e,{eq:a})=>a(e.active,!0),with:{prices:{where:(e,{eq:a})=>a(e.active,!0)}}});if(e.length)return{data:e,error:null};return{data:[],error:null}}catch(e){return console.log(e),{data:[],error:e}}};(0,x.h)([k,v,N,j,C,P,U,D,Z,_,I,A,q,F,T,z,S,E,B,L,O,V,W,R]),(0,t.U)("2c6a85d56141f1302f550bf73641f1bb437f8c30",null,k),(0,t.U)("d79fda52b74c10070baeb50e62e519b3ba4ea129",null,v),(0,t.U)("bf13edd666219981da2d2ad51cac7537023d1d90",null,N),(0,t.U)("f46303b3608098cba15a480ceec93690bfc2435d",null,j),(0,t.U)("417b18ab59f27cadda6a49c7b96e769adca685b7",null,C),(0,t.U)("0f13f0cd8d72390a7469a60f7d29f257096024cb",null,P),(0,t.U)("d643431fc06c5cc4ba5ca3d71aef88824802032b",null,U),(0,t.U)("a2d4ea10404f44a150e4c7c1ab021f369fbf21e0",null,D),(0,t.U)("1f35766a2c7399231db38ff7e71d889523e35320",null,Z),(0,t.U)("f1c4575f1aa04b0b171265e1a582eaa946f577a8",null,_),(0,t.U)("1d7956b46734ac5762684d2906bb4ecb9e7afc96",null,I),(0,t.U)("4a2cab8d48c7ab565dc194d925837c9af8e41d45",null,A),(0,t.U)("45296063453c47b2d59b262faee8cdb4b9615201",null,q),(0,t.U)("b67d2b8528a174e713442eac3b93e4e40ddf2151",null,F),(0,t.U)("d016c8e248949cf0e0679cea37a599b256564949",null,T),(0,t.U)("23d258b4a0ed2cd54c2684f72dd9708f858897ed",null,z),(0,t.U)("453834eaf571f615d95d1dc2663c8f75db24fe49",null,S),(0,t.U)("d09f14ac4ef39816839c0413ba841e2c9f00f930",null,E),(0,t.U)("079e33a7786d357bf8b15353b8dee8f948ebd93b",null,B),(0,t.U)("4e60e9c17aa85b5e328f6db15ff1dec244d6afb2",null,L),(0,t.U)("847a8ef020990095f03fc54601460ec72777b66c",null,O),(0,t.U)("4af80a06816005e931cd7f0ead5a1e93455a28fc",null,V),(0,t.U)("05748815d7a50bb0da1dd63e2e666ca8430be215",null,W),(0,t.U)("fca7d3ede7a1acca1350701808fdd80e09ceec6e",null,R)},73881:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>d});var t=r(31323);let d=e=>{let a=(0,t.fillMetadataSegment)(".",e.params,"favicon.ico");return[{type:"image/x-icon",sizes:"16x16",url:a+""}]}}};