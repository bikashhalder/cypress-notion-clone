(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[161],{4275:function(e,t,a){Promise.resolve().then(a.t.bind(a,8326,23)),Promise.resolve().then(a.bind(a,9639)),Promise.resolve().then(a.bind(a,7997)),Promise.resolve().then(a.bind(a,7918)),Promise.resolve().then(a.bind(a,6086)),Promise.resolve().then(a.bind(a,5374)),Promise.resolve().then(a.bind(a,3162)),Promise.resolve().then(a.bind(a,1199)),Promise.resolve().then(a.bind(a,7261)),Promise.resolve().then(a.bind(a,1472)),Promise.resolve().then(a.bind(a,2485))},2719:function(e,t,a){"use strict";var r=a(7437);a(2265),t.Z=()=>(0,r.jsx)("div",{role:"status",children:(0,r.jsxs)("svg",{"aria-hidden":"true",className:"inline w-8 h-8 mr-2 text-gray-200 animate-spin dark:text-primary-foreground/30 fill-primary-foreground ",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),(0,r.jsx)("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]})})},1092:function(e,t,a){"use strict";a.d(t,{Z:function(){return C}});var r=a(7437),s=a(1623),l=a(2265),i=a(8712),n=a(6061),o=a(2549),d=a(345);let c=i.fC,u=i.xz;i.x8;let f=i.h_,m=l.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(i.aV,{className:(0,d.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s,ref:t})});m.displayName=i.aV.displayName;let p=(0,n.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),x=l.forwardRef((e,t)=>{let{side:a="right",className:s,children:l,...n}=e;return(0,r.jsxs)(f,{children:[(0,r.jsx)(m,{}),(0,r.jsxs)(i.VY,{ref:t,className:(0,d.cn)(p({side:a}),s),...n,children:[l,(0,r.jsxs)(i.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,r.jsx)(o.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=i.VY.displayName;let h=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};h.displayName="SheetHeader";let g=l.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(i.Dx,{ref:t,className:(0,d.cn)("text-lg font-semibold text-foreground",a),...s})});g.displayName=i.Dx.displayName;let v=l.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(i.dk,{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",a),...s})});v.displayName=i.dk.displayName;var j=a(1827),b=a(6582),w=a(2485),y=a(6812),N=a(3089),k=a(1880),C=e=>{let{children:t,existingCollaborators:a,getCollaborators:i}=e,{user:n}=(0,s.useSupabaseUser)(),[o,d]=(0,l.useState)([]),f=(0,l.useRef)();(0,l.useEffect)(()=>()=>{f.current&&clearTimeout(f.current)},[]);let m=e=>{i(e)};return(0,r.jsxs)(c,{children:[(0,r.jsx)(u,{className:"w-full",children:t}),(0,r.jsxs)(x,{className:"w-[400px] sm:w-[500px]",children:[(0,r.jsxs)(h,{children:[(0,r.jsx)(g,{children:"Search Collaborator"}),(0,r.jsx)(v,{children:(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"You can also remove collaborator after adding them from the setting tab."})})]}),(0,r.jsxs)("div",{className:"flex justify-center items-center gap-2 mt-2",children:[(0,r.jsx)(j.Z,{}),(0,r.jsx)(b.I,{name:"name",className:"dark:bg-background",placeholder:"Email",onChange:e=>{f.current&&clearTimeout(f.current),f.current=setTimeout(async()=>{let t=await (0,k.rj)(e.target.value);d(t)},450)}})]}),(0,r.jsx)(w.ScrollArea,{className:"mt-6 overflow-y-scroll w-full rounded-md",children:o.filter(e=>!a.some(t=>t.id===e.id)).filter(e=>e.id!==(null==n?void 0:n.id)).map(e=>(0,r.jsxs)("div",{className:"p-4 flex justify-center items-center",children:[(0,r.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,r.jsxs)(y.Avatar,{className:"w-8 h-8",children:[(0,r.jsx)(y.AvatarImage,{src:"/"}),(0,r.jsx)(y.AvatarFallback,{children:"CP"})]}),(0,r.jsx)("div",{className:"text-sm gap-2 overflow-hidden overflow-ellipsis w-[180px] text-muted-foreground",children:e.email})]}),(0,r.jsx)(N.z,{variant:"secondary",onClick:()=>m(e),children:"Add"})]},e.id))})]})]})}},1844:function(e,t,a){"use strict";var r=a(7437);a(2265);var s=a(1472),l=a(7042);t.Z=e=>{let{header:t,content:a,children:i,description:n,className:o}=e;return(0,r.jsxs)(s.Dialog,{children:[(0,r.jsx)(s.DialogTrigger,{className:(0,l.Z)("",o),children:i}),(0,r.jsxs)(s.DialogContent,{className:"h-screen block sm:h-[440px] w-full overflow-scroll",children:[(0,r.jsxs)(s.DialogHeader,{children:[(0,r.jsx)(s.DialogTitle,{children:t}),(0,r.jsx)(s.DialogDescription,{children:n})]}),a]})]})}},8359:function(e,t,a){"use strict";a.d(t,{Z:function(){return m}});var r=a(7437),s=a(8811),l=a.n(s),i=a(4033),n=a(2265),o=a(5050),d=a(345);let c=o.fC,u=o.xz,f=n.forwardRef((e,t)=>{let{className:a,align:s="center",sideOffset:l=4,...i}=e;return(0,r.jsx)(o.h_,{children:(0,r.jsx)(o.VY,{ref:t,align:s,sideOffset:l,className:(0,d.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...i})})});f.displayName=o.VY.displayName;var m=e=>{let{children:t,getValue:s}=e;(0,i.useRouter)();let o=l()(()=>a.e(560).then(a.bind(a,7870)),{loadableGenerated:{webpack:()=>[7870]}}),[d,m]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{m(!0)},[]),d)?(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsxs)(c,{children:[(0,r.jsx)(u,{className:"cursor-pointer",children:t}),(0,r.jsx)(f,{className:"p-0 border-none",children:(0,r.jsx)(o,{onEmojiClick:e=>{s&&s(e.emoji)}})})]})}):null}},9639:function(e,t,a){"use strict";a.r(t);var r=a(7437);a(2265);var s=a(3089),l=a(4163),i=a(4033),n=a(3082);t.default=e=>{let{children:t}=e,{dispatch:a}=(0,l.useAppState)(),o=(0,i.useRouter)(),d=(0,n.createClientComponentClient)(),c=async()=>{await d.auth.signOut(),o.refresh(),a({type:"SET_WORKSPACES",payload:{workspaces:[]}}),o.push("/")};return(0,r.jsx)(s.z,{variant:"ghost",size:"icon",className:"p-0",onClick:c,children:t})}},7997:function(e,t,a){"use strict";a.r(t);var r=a(7437),s=a(6435);a(2265);var l=a(3089),i=a(4135),n=a(3088);t.default=()=>{let{setTheme:e,theme:t}=(0,s.F)();return(0,r.jsxs)(l.z,{variant:"outline",size:"icon",onClick:()=>e("dark"===t?"light":"dark"),children:[(0,r.jsx)(i.Z,{className:"h-[1.2rem]   w-[1.2rem]   rotate-0   scale-100   transition-all   dark:-rotate-90   dark:scale-0   "}),(0,r.jsx)(n.Z,{className:"absolute   h-[1.2rem]   w-[1.2rem]   rotate-90   scale-0   transition-all   dark:rotate-0   dark:scale-100   "})]})}},7918:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return X}});var r=a(7437),s=a(2265),l=a(4622),i=a(4163),n=a(1623),o=a(4033),d=a(3082),c=a(9057),u=a(5589),f=a(1274),m=a(9883),p=a(7972),x=a(1541),h=a(1738),g=a(3711),v=a(5883),j=a(6823),b=a(345);let w=s.forwardRef((e,t)=>{let{className:a,orientation:s="horizontal",decorative:l=!0,...i}=e;return(0,r.jsx)(j.f,{ref:t,decorative:l,orientation:s,className:(0,b.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",a),...i})});w.displayName=j.f.displayName;var y=a(6429),N=a(6582),k=a(1880),C=a(1872),S=a(1735),D=a(2506),E=a(3089);let z=D.fC;D.xz;let P=D.h_,A=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(D.aV,{className:(0,b.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s,ref:t})});A.displayName=D.aV.displayName;let _=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsxs)(P,{children:[(0,r.jsx)(A,{}),(0,r.jsx)(D.VY,{ref:t,className:(0,b.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...s})]})});_.displayName=D.VY.displayName;let R=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,b.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};R.displayName="AlertDialogHeader";let Z=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,b.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};Z.displayName="AlertDialogFooter";let I=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(D.Dx,{ref:t,className:(0,b.cn)("text-lg font-semibold",a),...s})});I.displayName=D.Dx.displayName;let T=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(D.dk,{ref:t,className:(0,b.cn)("text-sm text-muted-foreground",a),...s})});T.displayName=D.dk.displayName;let F=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(D.aU,{ref:t,className:(0,b.cn)((0,E.d)(),a),...s})});F.displayName=D.aU.displayName;let U=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(D.$j,{ref:t,className:(0,b.cn)((0,E.d)({variant:"outline"}),"mt-2 sm:mt-0",a),...s})});U.displayName=D.$j.displayName;var O=a(1092),V=a(2485),Y=a(6812),L=a(8251),M=a(9639),W=a(1396),B=a.n(W),H=a(74),q=a(6691),Q=a.n(q),X=()=>{let{toast:e}=(0,l.pm)(),{user:t,subscription:a}=(0,n.useSupabaseUser)(),{setOpen:j}=(0,H.useSubscriptionModal)(),D=(0,o.useRouter)(),P=(0,d.createClientComponentClient)(),{state:A,workspaceId:T,dispatch:W}=(0,i.useAppState)(),[q,X]=(0,s.useState)("private"),[J,K]=(0,s.useState)([]),[$,G]=(0,s.useState)(!1),[ee,et]=(0,s.useState)(),ea=(0,s.useRef)(),[er,es]=(0,s.useState)(!1),[el,ei]=(0,s.useState)(!1),[en,eo]=(0,s.useState)(null),[ed,ec]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=async()=>{try{if(t){let{data:e,error:a}=await P.from("users").select("avatar_url").eq("id",t.id).single();if(a)throw a;e&&ec(e.avatar_url)}}catch(e){console.error("Error fetching avatar:",e)}};e()},[t]);let eu=async()=>{if(en)try{let{data:a,error:r}=await P.storage.from("avatars").upload("user_".concat(null==t?void 0:t.id,"/").concat(en.name),en);if(r)throw r;if(t){let{data:r,error:s}=await P.from("users").update({avatar_url:null==a?void 0:a.path}).eq("id",t.id).single();if(s)throw s;e({title:"Success",description:"Avatar URL updated successfully"}),console.log("Avatar URL updated successfully:",r)}}catch(e){console.error("Error uploading avatarupload:",e)}},ef=async()=>{ei(!0);try{let{url:e,error:t}=await (0,b.qC)({url:"/api/create-portal-link"});window.location.assign(e)}catch(e){console.log(e),ei(!1)}ei(!1)},em=async e=>{if(T){if((null==a?void 0:a.status)!=="active"&&J.length>=2){j(!0);return}await (0,k.a4)([e],T),K([...J,e])}},ep=async e=>{T&&(1===J.length&&X("private"),await (0,k.fD)([e],T),K(J.filter(t=>t.id!==e.id)),D.refresh())},ex=async e=>{var t;if(!T)return;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!a)return;let r=(0,C.Z)();es(!0);let{data:s,error:l}=await P.storage.from("workspace-logos").upload("workspaceLogo.".concat(r),a,{cacheControl:"3600",upsert:!0});l||(W({type:"UPDATE_WORKSPACE",payload:{workspace:{logo:s.path},workspaceId:T}}),await (0,k.eA)({logo:s.path},T),es(!1))},eh=async()=>{T&&(J.length>0&&await (0,k.fD)(J,T),X("private"),G(!1))};return(0,s.useEffect)(()=>{let e=A.workspaces.find(e=>e.id===T);e&&et(e)},[T,A]),(0,s.useEffect)(()=>{if(!T)return;let e=async()=>{let e=await (0,k.vW)(T);e.length&&(X("shared"),K(e))};e()},[T]),(0,r.jsxs)("div",{className:"flex gap-4 flex-col",children:[(0,r.jsxs)("p",{className:"flex items-center gap-2 mt-6",children:[(0,r.jsx)(c.Z,{size:20}),"Workspace"]}),(0,r.jsx)(w,{}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)(y._,{htmlFor:"workspaceName",className:"text-sm text-muted-foreground",children:"Name"}),(0,r.jsx)(N.I,{name:"workspaceName",value:ee?ee.title:"",placeholder:"Workspace Name",onChange:e=>{T&&e.target.value&&(W({type:"UPDATE_WORKSPACE",payload:{workspace:{title:e.target.value},workspaceId:T}}),ea.current&&clearTimeout(ea.current),ea.current=setTimeout(async()=>{},500))}}),(0,r.jsx)(y._,{htmlFor:"workspaceLogo",className:"text-sm text-muted-foreground",children:"Workspace Logo"}),(0,r.jsx)(N.I,{name:"workspaceLogo",type:"file",accept:"image/*",placeholder:"Workspace Logo",onChange:ex,disabled:er||(null==a?void 0:a.status)!=="active"}),(null==a?void 0:a.status)!=="active"&&(0,r.jsx)("small",{className:"text-muted-foreground",children:"To customize your workspace, you need to be on a Pro Plan"})]}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y._,{htmlFor:"permissions",children:"Permissions"}),(0,r.jsxs)(S.Ph,{onValueChange:e=>{"private"===e?G(!0):X(e)},value:q,children:[(0,r.jsx)(S.i4,{className:"w-full h-26 -mt-3",children:(0,r.jsx)(S.ki,{})}),(0,r.jsx)(S.Bw,{children:(0,r.jsxs)(S.DI,{children:[(0,r.jsx)(S.Ql,{value:"private",children:(0,r.jsxs)("div",{className:"p-2   flex   gap-4   justify-center   items-center   ",children:[(0,r.jsx)(u.Z,{}),(0,r.jsxs)("article",{className:"text-left flex flex-col",children:[(0,r.jsx)("span",{children:"Private"}),(0,r.jsx)("p",{children:"Your workspace is private to you. You can choose to share it later."})]})]})}),(0,r.jsx)(S.Ql,{value:"shared",children:(0,r.jsxs)("div",{className:"p-2 flex gap-4 justify-center items-center",children:[(0,r.jsx)(f.Z,{}),(0,r.jsxs)("article",{className:"text-left flex flex-col",children:[(0,r.jsx)("span",{children:"Shared"}),(0,r.jsx)("span",{children:"You can invite collaborators."})]})]})})]})})]}),"shared"===q&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(O.Z,{existingCollaborators:J,getCollaborators:e=>{em(e)},children:(0,r.jsxs)(E.z,{type:"button",className:"text-sm mt-4",children:[(0,r.jsx)(m.Z,{}),"Add Collaborators"]})}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Collaborators ",J.length||""]}),(0,r.jsx)(V.ScrollArea,{className:"   h-[120px]   overflow-auto   w-full   rounded-md   border   border-muted-foreground/20",children:J.length?J.map(e=>(0,r.jsxs)("div",{className:"p-4 flex   justify-between   items-center   ",children:[(0,r.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,r.jsxs)(Y.Avatar,{children:[(0,r.jsx)(Y.AvatarImage,{src:"/avatars/7.png"}),(0,r.jsx)(Y.AvatarFallback,{children:"PJ"})]}),(0,r.jsx)("div",{className:"text-sm    gap-2   text-muted-foreground   overflow-hidden      ",children:e.email})]}),(0,r.jsx)(E.z,{variant:"secondary",onClick:()=>ep(e),children:"Remove"})]},e.id)):(0,r.jsx)("div",{className:"absolute   right-0 left-0   top-0   bottom-0   flex   justify-center   items-center   ",children:(0,r.jsx)("span",{className:"text-muted-foreground text-sm",children:"You have no collaborators"})})})]})]}),(0,r.jsxs)(L.bZ,{variant:"destructive",children:[(0,r.jsx)(L.X,{children:"Warning! deleting you workspace will permanantly delete all data related to this workspace."}),(0,r.jsx)(E.z,{type:"submit",size:"sm",variant:"destructive",className:"mt-4    text-sm   bg-destructive/40    border-2    border-destructive",onClick:async()=>{T&&(await (0,k.zl)(T),e({title:"Successfully deleted your workspae"}),W({type:"DELETE_WORKSPACE",payload:T}),D.replace("/dashboard"))},children:"Delete Workspace"})]}),(0,r.jsxs)("p",{className:"flex items-center gap-2 mt-6",children:[(0,r.jsx)(p.Z,{size:20})," Profile"]}),(0,r.jsx)(w,{}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(Y.Avatar,{children:ed?(0,r.jsx)(Q(),{src:P.storage.from("avatars").getPublicUrl(ed).data.publicUrl,fill:!0,className:"w-full md:h-48   h-20   object-cover",alt:"Profile Picture"}):(0,r.jsx)(Y.AvatarImage,{src:""})}),(0,r.jsxs)("div",{className:"flex flex-col ml-6",children:[(0,r.jsx)("small",{className:"text-muted-foreground cursor-not-allowed",children:t?t.email:""}),(0,r.jsx)(y._,{htmlFor:"profilePicture",className:"text-sm text-muted-foreground",children:"Profile Picture"}),(0,r.jsx)(N.I,{name:"profilePicture",type:"file",accept:"image/*",placeholder:"Profile Picture",onChange:e=>{e.target.files&&e.target.files[0]&&eo(e.target.files[0])},className:"mb-2"}),(0,r.jsxs)(E.z,{className:"mt-3",disabled:null===en,onClick:eu,children:[(0,r.jsx)(x.Z,{})," Upload"]})]})]}),(0,r.jsxs)("p",{className:"flex items-center gap-2 mt-6",children:[(0,r.jsx)(h.Z,{size:20})," Billing & Plan"]}),(0,r.jsx)(w,{}),(0,r.jsxs)("p",{className:"text-muted-foreground",children:["You are currently on a"," ",(null==a?void 0:a.status)==="active"?"Pro":"Free"," Plan"]}),(0,r.jsxs)(B(),{href:"/",target:"_blank",className:"text-muted-foreground flex flex-row items-center gap-2",children:["View Plans ",(0,r.jsx)(g.Z,{size:16})]}),(null==a?void 0:a.status)==="active"?(0,r.jsx)("div",{children:(0,r.jsx)(E.z,{type:"button",size:"sm",variant:"secondary",disabled:el,className:"text-sm",onClick:ef,children:"Manage Subscription"})}):(0,r.jsx)("div",{children:(0,r.jsx)(E.z,{type:"button",size:"sm",variant:"secondary",className:"text-sm",onClick:()=>j(!0),children:"Start Plan"})}),(0,r.jsx)(w,{}),(0,r.jsx)("div",{className:"ml-4",children:(0,r.jsx)(M.default,{children:(0,r.jsxs)("div",{className:"flex items-center ",children:[(0,r.jsx)(v.Z,{})," ",(0,r.jsx)("span",{className:"ml-2",children:" Logout"})]})})})]}),(0,r.jsx)(z,{open:$,children:(0,r.jsxs)(_,{children:[(0,r.jsxs)(R,{children:[(0,r.jsx)(I,{children:"Are you sure?"}),(0,r.jsx)(L.X,{children:"Changing a Shared workspace to a Private workspace will remove all collaborators permanantly."})]}),(0,r.jsxs)(Z,{children:[(0,r.jsx)(U,{onClick:()=>G(!1),children:"Cancel"}),(0,r.jsx)(F,{onClick:eh,children:"Continue"})]})]})})]})}},6086:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return E}});var r=a(7437),s=a(4163),l=a(2265),i=a(1839),n=e=>{let{children:t,message:a}=e;return(0,r.jsx)(i.pn,{children:(0,r.jsxs)(i.u,{children:[(0,r.jsx)(i.aJ,{children:t}),(0,r.jsx)(i._v,{children:a})]})})},o=a(9883),d=a(1623),c=a(1872),u=a(1880),f=a(4622),m=a(2490),p=a(3523),x=a(345);let h=m.fC,g=l.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(m.ck,{ref:t,className:(0,x.cn)("border-b",a),...s})});g.displayName="AccordionItem";let v=l.forwardRef((e,t)=>{let{className:a,children:s,disabled:l,...i}=e;return(0,r.jsx)(m.h4,{className:"flex justify-between items-center",children:(0,r.jsxs)(m.xz,{ref:t,className:(0,x.cn)("flex items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",a),...i,children:[s,!l&&(0,r.jsx)(p.Z,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});v.displayName=m.xz.displayName;let j=l.forwardRef((e,t)=>{let{className:a,children:s,...l}=e;return(0,r.jsx)(m.VY,{ref:t,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...l,children:(0,r.jsx)("div",{className:(0,x.cn)("pb-4 pt-0",a),children:s})})});j.displayName=m.VY.displayName;var b=a(4033),w=a(7042),y=a(8359),N=a(4737);let k=e=>{var t,a;let{title:i,id:m,listType:p,iconId:x,children:h,disabled:C,...S}=e,{toast:D}=(0,f.pm)(),{user:E}=(0,d.useSupabaseUser)(),{state:z,dispatch:P,workspaceId:A,folderId:_}=(0,s.useAppState)(),[R,Z]=(0,l.useState)(!1),I=(0,b.useRouter)(),T=(0,l.useMemo)(()=>{if("folder"===p){var e,t;let a=null===(t=z.workspaces.find(e=>e.id===A))||void 0===t?void 0:null===(e=t.folders.find(e=>e.id===m))||void 0===e?void 0:e.title;return i!==a&&a?a:i}},[z,p,A,m,i]),F=(0,l.useMemo)(()=>{if("file"===p){var e,t,a;let r=m.split("folder"),s=null===(a=z.workspaces.find(e=>e.id===A))||void 0===a?void 0:null===(t=a.folders.find(e=>e.id===r[0]))||void 0===t?void 0:null===(e=t.files.find(e=>e.id===r[1]))||void 0===e?void 0:e.title;return i!==s&&s?s:i}},[z,p,A,m,i]),U=(e,t)=>{"folder"===t&&I.push("/dashboard/".concat(A,"/").concat(e)),"file"===t&&I.push("/dashboard/".concat(A,"/").concat(_,"/").concat(e.split("folder")[1]))},O=async()=>{if(!R)return;Z(!1);let e=m.split("folder");if((null==e?void 0:e.length)===1){if(!T)return;D({title:"Success",description:"Folder title changed."}),await (0,u.Tb)({title:i},e[0])}if(2===e.length&&e[1]){if(!F)return;let{data:t,error:a}=await (0,u.Dd)({title:F},e[1]);a?D({title:"Error",variant:"destructive",description:"Could not update the title for this file"}):D({title:"Success",description:"File title changed."})}},V=async e=>{if(A&&"folder"===p){P({type:"UPDATE_FOLDER",payload:{workspaceId:A,folderId:m,folder:{iconId:e}}});let{data:t,error:a}=await (0,u.Tb)({iconId:e},m);a?D({title:"Error",variant:"destructive",description:"Could not update the emoji for this folder"}):D({title:"Success",description:"Update emoji for the folder"})}},Y=async()=>{if(!(null==E?void 0:E.email)||!A)return;let e=m.split("folder");if("folder"===p){P({type:"UPDATE_FOLDER",payload:{folder:{inTrash:"Deleted by ".concat(null==E?void 0:E.email)},folderId:e[0],workspaceId:A}});let{data:t,error:a}=await (0,u.Tb)({inTrash:"Deleted by ".concat(null==E?void 0:E.email)},e[0]);a?D({title:"Error",variant:"destructive",description:"Could not move the folder to trash"}):D({title:"Success",description:"Moved folder to trash"})}if("file"===p){P({type:"UPDATE_FILE",payload:{file:{inTrash:"Deleted by ".concat(null==E?void 0:E.email)},folderId:e[0],workspaceId:A,fileId:e[1]}});let{data:t,error:a}=await (0,u.Dd)({inTrash:"Deleted by ".concat(null==E?void 0:E.email)},e[1]);a?D({title:"Error",variant:"destructive",description:"Could not move the folder to trash"}):D({title:"Success",description:"Moved folder to trash"})}},L="folder"===p,M=(0,w.Z)("dark:text-white whitespace-nowrap flex justify-between items-center w-full relative",{"group/folder":L,"group/file":!L}),W=(0,l.useMemo)(()=>(0,w.Z)("relative",{"border-none text-md":L,"border-none ml-6 text-[16px] py-1":!L}),[L]),B=(0,l.useMemo)(()=>(0,w.Z)("h-full hidden rounded-sm absolute right-0 items-center justify-center",{"group-hover/file:block":"file"===p,"group-hover/folder:block":"folder"===p}),[L]),H=async()=>{if(!A)return;let e={folderId:m,data:null,createdAt:new Date().toISOString(),inTrash:null,title:"Untitled",iconId:"\uD83D\uDCC4",id:(0,c.Z)(),workspaceId:A,bannerUrl:""};P({type:"ADD_FILE",payload:{file:e,folderId:m,workspaceId:A}});let{data:t,error:a}=await (0,u.cn)(e);a?D({title:"Error",variant:"destructive",description:"Could not create a file"}):D({title:"Success",description:"File created."})};return(0,r.jsxs)(g,{value:m,className:W,onClick:e=>{e.stopPropagation(),U(m,p)},children:[(0,r.jsx)(v,{id:p,className:"hover:no-underline    p-2    dark:text-muted-foreground    text-sm",disabled:"file"===p,children:(0,r.jsxs)("div",{className:M,children:[(0,r.jsxs)("div",{className:"flex    gap-4    items-center    justify-center    overflow-hidden",children:[(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)(y.Z,{getValue:V,children:x})}),(0,r.jsx)("input",{type:"text",value:"folder"===p?T:F,className:(0,w.Z)("outline-none overflow-hidden w-[140px] text-Neutrals/neutrals-7",{"bg-muted cursor-text":R,"bg-transparent cursor-pointer":!R}),readOnly:!R,onDoubleClick:()=>{Z(!0)},onBlur:O,onChange:"folder"===p?e=>{if(!A)return;let t=m.split("folder");1===t.length&&P({type:"UPDATE_FOLDER",payload:{folder:{title:e.target.value},folderId:t[0],workspaceId:A}})}:e=>{if(!A||!_)return;let t=m.split("folder");2===t.length&&t[1]&&P({type:"UPDATE_FILE",payload:{file:{title:e.target.value},folderId:_,workspaceId:A,fileId:t[1]}})}})]}),(0,r.jsxs)("div",{className:B,children:[(0,r.jsx)(n,{message:"Delete Folder",children:(0,r.jsx)(N.Z,{onClick:Y,size:15,className:"hover:dark:text-white dark:text-Neutrals/neutrals-7 transition-colors"})}),"folder"===p&&!R&&(0,r.jsx)(n,{message:"Add File",children:(0,r.jsx)(o.Z,{onClick:H,size:15,className:"hover:dark:text-white dark:text-Neutrals/neutrals-7 transition-colors"})})]})]})}),(0,r.jsx)(j,{children:null===(a=z.workspaces.find(e=>e.id===A))||void 0===a?void 0:null===(t=a.folders.find(e=>e.id===m))||void 0===t?void 0:t.files.filter(e=>!e.inTrash).map(e=>{let t="".concat(m,"folder").concat(e.id);return(0,r.jsx)(k,{title:e.title,listType:"file",id:t,iconId:e.iconId},e.id)})})]})};var C=a(3082),S=()=>{let e=(0,C.createClientComponentClient)(),{dispatch:t,state:a,workspaceId:r}=(0,s.useAppState)(),i=(0,b.useRouter)();return(0,l.useEffect)(()=>{let r=e.channel("db-changes").on("postgres_changes",{event:"*",schema:"public",table:"files"},async e=>{if("INSERT"===e.eventType){var r,s;let{folder_id:l,workspace_id:i,id:n}=e.new;if(!(null===(s=a.workspaces.find(e=>e.id===i))||void 0===s?void 0:null===(r=s.folders.find(e=>e.id===l))||void 0===r?void 0:r.files.find(e=>e.id===n))){let a={id:e.new.id,workspaceId:e.new.workspace_id,folderId:e.new.folder_id,createdAt:e.new.created_at,title:e.new.title,iconId:e.new.icon_id,data:e.new.data,inTrash:e.new.in_trash,bannerUrl:e.new.banner_url};t({type:"ADD_FILE",payload:{file:a,folderId:l,workspaceId:i}})}}else if("DELETE"===e.eventType){let r="",s="",l=a.workspaces.some(t=>t.folders.some(a=>a.files.some(l=>{if(l.id===e.old.id)return r=t.id,s=a.id,!0})));l&&r&&s&&(i.replace("/dashboard/".concat(r)),t({type:"DELETE_FILE",payload:{fileId:e.old.id,folderId:s,workspaceId:r}}))}else if("UPDATE"===e.eventType){let{folder_id:r,workspace_id:s}=e.new;a.workspaces.some(a=>a.folders.some(a=>a.files.some(a=>{if(a.id===e.new.id)return t({type:"UPDATE_FILE",payload:{workspaceId:s,folderId:r,fileId:e.new.id,file:{title:e.new.title,iconId:e.new.icon_id,inTrash:e.new.in_trash}}}),!0})))}}).subscribe();return()=>{r.unsubscribe()}},[e,a,r]),null},D=a(74),E=e=>{let{workspaceFolders:t,workspaceId:a}=e;S();let{state:i,dispatch:m,folderId:p}=(0,s.useAppState)(),{open:x,setOpen:g}=(0,D.useSubscriptionModal)(),{toast:v}=(0,f.pm)(),[j,b]=(0,l.useState)(t),{subscription:w}=(0,d.useSupabaseUser)();(0,l.useEffect)(()=>{t.length>0&&m({type:"SET_FOLDERS",payload:{workspaceId:a,folders:t.map(e=>{var t,r;return{...e,files:(null===(r=i.workspaces.find(e=>e.id===a))||void 0===r?void 0:null===(t=r.folders.find(t=>t.id===e.id))||void 0===t?void 0:t.files)||[]}})}})},[t,a]),(0,l.useEffect)(()=>{var e;b((null===(e=i.workspaces.find(e=>e.id===a))||void 0===e?void 0:e.folders)||[])},[i]);let y=async()=>{if(j.length>=3&&!w){g(!0);return}let e={data:null,id:(0,c.Z)(),createdAt:new Date().toISOString(),title:"Untitled",iconId:"\uD83D\uDCC4",inTrash:null,workspaceId:a,bannerUrl:""};m({type:"ADD_FOLDER",payload:{workspaceId:a,folder:{...e,files:[]}}});let{data:t,error:r}=await (0,u.L6)(e);r?v({title:"Error",variant:"destructive",description:"Could not create the folder"}):v({title:"Success",description:"Created folder."})},[N,C]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{C(!0)},[]),N)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex   sticky    z-20    top-0    bg-background    w-full     h-10    group/title    justify-between    items-center    pr-4    text-Neutrals/neutrals-8   ",children:[(0,r.jsx)("span",{className:"text-Neutrals-8    font-bold    text-xs",children:"FOLDERS"}),(0,r.jsx)(n,{message:"Create Folder",children:(0,r.jsx)(o.Z,{onClick:y,size:16,className:"group-hover/title:inline-block   hidden    cursor-pointer   hover:dark:text-white   "})})]}),(0,r.jsx)(h,{type:"multiple",defaultValue:[p||""],className:"pb-20",children:j.filter(e=>!e.inTrash).map(e=>(0,r.jsx)(k,{title:e.title,listType:"folder",id:e.id,iconId:e.iconId},e.id))})]}):null}},5374:function(e,t,a){"use strict";a.r(t),a.d(t,{nativeNavigation:function(){return o}});var r=a(7437),s=a(7042),l=a(8004),i=a(1525),n=a(2265);let o=[{title:"Sidebar",id:"sidebar",customIcon:l.Z},{title:"Pages",id:"pages",customIcon:i.Z}];t.default=e=>{let{children:t}=e,[a,l]=(0,n.useState)("");return(0,r.jsxs)(r.Fragment,{children:["sidebar"===a&&(0,r.jsx)(r.Fragment,{children:t}),(0,r.jsx)("nav",{className:"bg-black/10 backdrop-blur-lg sm:hidden fixed z-50 bottom-0 right-0 left-0",children:(0,r.jsx)("ul",{className:"flex justify-between items-center p-4",children:o.map(e=>(0,r.jsxs)("li",{className:"flex items-center flex-col justify-center ",onClick:()=>{l(e.id)},children:[(0,r.jsx)(e.customIcon,{}),(0,r.jsx)("small",{className:(0,s.Z)("",{"text-muted-foreground":a!==e.id}),children:e.title})]},e.id))})})]})}},3162:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var r=a(7437),s=a(4163),l=a(2265),i=a(3177),n=a(345);let o=l.forwardRef((e,t)=>{let{className:a,value:s,...l}=e;return(0,r.jsx)(i.fC,{ref:t,className:(0,n.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...l,children:(0,r.jsx)(i.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(s||0),"%)")}})})});o.displayName=i.fC.displayName;var d=a(2851),c=e=>{let{foldersLength:t,subscription:a}=e,{workspaceId:i,state:n}=(0,s.useAppState)(),[c,u]=(0,l.useState)(t/3*100);return(0,l.useEffect)(()=>{var e;let t=null===(e=n.workspaces.find(e=>e.id===i))||void 0===e?void 0:e.folders.length;void 0!==t&&u(t/3*100)},[n,i]),(0,r.jsxs)("article",{className:"mb-4 ",children:[(null==a?void 0:a.status)!=="active"&&(0,r.jsxs)("div",{className:"flex gap-2 text-muted-foreground mb-2 items-center",children:[(0,r.jsx)("div",{className:"h-4 w-4",children:(0,r.jsx)(d.Z,{})}),(0,r.jsxs)("div",{className:"flex justify-between w-full items-center",children:[(0,r.jsx)("div",{className:"ml-2",children:"Free Plan "}),(0,r.jsxs)("small",{children:[c.toFixed(0),"% / 100%"]})]})]}),(null==a?void 0:a.status)!=="active"&&(0,r.jsx)(o,{value:c,className:"h-1"})]})}},1199:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return z}});var r=a(7437),s=a(4163),l=a(2265),i=a(3082),n=a(6691),o=a.n(n),d=a(1396),c=a.n(d),u=e=>{let{workspace:t,onClick:a}=e,s=(0,i.createClientComponentClient)(),[n,d]=(0,l.useState)("/cypresslogo.svg");return(0,l.useEffect)(()=>{if(t.logo){var e;let a=null===(e=s.storage.from("workspace_logos").getPublicUrl(t.logo))||void 0===e?void 0:e.data.publicUrl;d(a)}},[t]),(0,r.jsxs)(c(),{href:"/dashboard/".concat(t.id),onClick:()=>{a&&a(t)},className:"flex rounded-md    hover:bg-muted    transition-all    flex-row    p-2    gap-4    justify-center    cursor-pointer    items-center    my-2",children:[(0,r.jsx)(o(),{src:n,alt:"workspace logo",width:26,height:26,objectFit:"cover"}),(0,r.jsx)("div",{className:"flex flex-col",children:(0,r.jsx)("p",{className:"text-lg w-[170px] overflow-hidden overflow-ellipsis whitespace-nowrap",children:t.title})})]})},f=a(1844),m=a(1623),p=a(4033),x=a(6429),h=a(6582),g=a(1735),v=a(8010),j=a(5589),b=a(1274),w=a(9883),y=a(3089),N=a(1872),k=a(1880),C=a(1092),S=a(2485),D=a(6812),E=()=>{let{user:e}=(0,m.useSupabaseUser)(),t=(0,p.useRouter)(),[a,s]=(0,l.useState)("private"),[i,n]=(0,l.useState)(""),[o,d]=(0,l.useState)([]),c=e=>{d([...o,e])},u=e=>{d(o.filter(t=>t.id!==e.id))},f=async()=>{let r=(0,N.Z)();if(null==e?void 0:e.id){let s={data:null,createdAt:new Date().toISOString(),iconId:"\uD83D\uDE04",id:r,inTrash:"",title:i,workspaceOwner:e.id,logo:null,bannerUrl:""};"private"===a&&(await (0,k.MB)(s),t.refresh()),"shared"===a&&(await (0,k.MB)(s),await (0,k.a4)(o,r),t.refresh())}};return(0,r.jsxs)("div",{className:"flex gap-4 flex-col",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(x._,{htmlFor:"name",className:"text-sm text-muted-foreground",children:"Name"}),(0,r.jsx)("div",{className:"flex justify-center items-center gap-2",children:(0,r.jsx)(h.I,{name:"name",value:i,placeholder:"Workspace Name",onChange:e=>n(e.target.value)})})]}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x._,{htmlFor:"permission",className:"text-sm text-muted-foreground",children:"Permission"}),(0,r.jsxs)(g.Ph,{onValueChange:e=>{s(e)},defaultValue:a,children:[(0,r.jsx)(g.i4,{className:"w-full h-26 -mt-3",children:(0,r.jsx)(g.ki,{})}),(0,r.jsx)(g.Bw,{children:(0,r.jsxs)(v.DI,{children:[(0,r.jsx)(g.Ql,{value:"private",children:(0,r.jsxs)("div",{className:"p-2 flex gap-4 justify-center items-center",children:[(0,r.jsx)(j.Z,{}),(0,r.jsxs)("article",{className:"text-left flex flex-col",children:[(0,r.jsx)("span",{children:"Private"}),(0,r.jsx)("p",{children:"Your Workspace is private to you. You can choose to share it later."})]})]})}),(0,r.jsx)(g.Ql,{value:"shared",children:(0,r.jsxs)("div",{className:"p-2 flex gap-4 justify-center items-center",children:[(0,r.jsx)(b.Z,{}),(0,r.jsxs)("article",{className:"text-left flex flex-col",children:[(0,r.jsx)("span",{children:"Shared"}),(0,r.jsx)("p",{children:"You can invite collaborators for this workspace."})]})]})})]})})]})]}),"shared"===a&&(0,r.jsxs)("div",{children:[(0,r.jsx)(C.Z,{existingCollaborators:o,getCollaborators:e=>c(e),children:(0,r.jsxs)(y.z,{type:"button",className:"text-sm mt-4",children:[(0,r.jsx)(w.Z,{})," Add Collaborator"]})}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Collaborators ",o.length||""]}),(0,r.jsx)(S.ScrollArea,{className:"h-[120pc] overflow-y-scroll w-full rounded-md border border-muted-foreground/20",children:o.length?o.map(e=>(0,r.jsxs)("div",{className:"p-4 flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex gap-4 items-center ",children:[(0,r.jsxs)(D.Avatar,{children:[(0,r.jsx)(D.AvatarImage,{src:""}),(0,r.jsx)(D.AvatarFallback,{children:"PJ"})]}),(0,r.jsx)("div",{className:"text-sm gap-2 text-muted-foreground overflow-hidden overflow-ellipsis sm:w-[300px] w-[140px]",children:e.email})]}),(0,r.jsx)(y.z,{variant:"secondary",onClick:()=>u(e),children:"Remove"})]},e.id)):(0,r.jsx)("div",{className:"absolute right-0 left-0 bottom-0 flex justify-center items-center",children:(0,r.jsx)("span",{className:"text-muted-foreground text-sm",children:"You Have No Collaborators"})})})]})]}),(0,r.jsx)(y.z,{type:"button",disabled:!i||"shared"===a&&0===o.length,variant:"secondary",onClick:f,children:"Create"})]})},z=e=>{let{privateWorkspaces:t,collaboratingWorkspaces:a,sharedWorkspaces:i,defaultValue:n}=e,{dispatch:o,state:d}=(0,s.useAppState)(),[c,m]=(0,l.useState)(n),[p,x]=(0,l.useState)(!1);(0,l.useEffect)(()=>{d.workspaces.length||o({type:"SET_WORKSPACES",payload:{workspaces:[...t,...i,...a].map(e=>({...e,folders:[]}))}})},[t,a,i]);let h=e=>{m(e),x(!1)};return(0,l.useEffect)(()=>{let e=d.workspaces.find(e=>e.id===(null==n?void 0:n.id));e&&m(e)},[d,n]),(0,r.jsxs)("div",{className:"relative inline-block text-left",children:[(0,r.jsx)("div",{children:(0,r.jsx)("span",{onClick:()=>x(!p),children:c?(0,r.jsx)(u,{workspace:c}):"Select a workspace"})}),p&&(0,r.jsx)("div",{className:"origin-top-right    absolute   w-full   rounded-md   shadow-md   z-50   h-[190px]   bg-black/10   backdrop-blur-lg   group   overflow-auto   border-[1px]   border-muted   ",children:(0,r.jsxs)("div",{className:"rounded-md flex flex-col",children:[(0,r.jsxs)("div",{className:"!p-2",children:[!!t.length&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"text-muted-foreground ",children:"Private"}),(0,r.jsx)("hr",{}),t.map(e=>(0,r.jsx)(u,{workspace:e,onClick:h},e.id))]}),!!i.length&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"text-muted-foreground ",children:"Shared"}),(0,r.jsx)("hr",{}),i.map(e=>(0,r.jsx)(u,{workspace:e,onClick:h},e.id))]}),!!a.length&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"text-muted-foreground ",children:"Collaborating"}),(0,r.jsx)("hr",{}),a.map(e=>(0,r.jsx)(u,{workspace:e,onClick:h},e.id))]})]}),(0,r.jsx)(f.Z,{header:"Create A Workspace",content:(0,r.jsx)(E,{}),description:"Workspace give you the poewer to collaborate with others. You can change your workspace privacy settings after creating the workspace too.",children:(0,r.jsxs)("div",{className:"flex transition-all hover:bg-muted justify-center items-center gap-2 p-2 w-full",children:[(0,r.jsx)("article",{className:"text-slate-500    rounded-full   bg-slate-800    w-4    h-4    flex    items-center    justify-center",children:"+"}),"Create Workspace"]})})]})})]})}},7261:function(e,t,a){"use strict";a.r(t);var r=a(7437),s=a(4163),l=a(5818),i=a(8734),n=a(1396),o=a.n(n),d=a(2265);t.default=()=>{let{state:e,workspaceId:t}=(0,s.useAppState)(),[a,n]=(0,d.useState)([]),[c,u]=(0,d.useState)([]);return(0,d.useEffect)(()=>{var a,r;let s=(null===(a=e.workspaces.find(e=>e.id===t))||void 0===a?void 0:a.folders.filter(e=>e.inTrash))||[];n(s);let l=[];null===(r=e.workspaces.find(e=>e.id===t))||void 0===r||r.folders.forEach(e=>{e.files.forEach(e=>{e.inTrash&&l.push(e)})}),u(l)},[e,t]),(0,r.jsxs)("section",{children:[!!a.length&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h3",{children:"Folders"}),a.map(e=>(0,r.jsx)(o(),{href:"/dashboard/".concat(e.workspaceId,"/").concat(e.id),className:"hover:bg-muted   rounded-md   p-2   flex   items-center   justify-between   ",children:(0,r.jsx)("article",{children:(0,r.jsxs)("aside",{className:"flex items-center gap-2",children:[(0,r.jsx)(l.Z,{}),e.title]})})},e.id))]}),!!c.length&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h3",{children:"Files"}),c.map(e=>(0,r.jsx)(o(),{href:"/dashboard/".concat(e.workspaceId,"/").concat(e.folderId,"/").concat(e.id),className:"hover:bg-muted rounded-md p-2 flex items-center justify-between",children:(0,r.jsx)("article",{children:(0,r.jsxs)("aside",{children:[(0,r.jsx)(i.Z,{}),e.title]})})},e.id))]}),!c.length&&!a.length&&(0,r.jsx)("div",{className:"text-muted-foreground absolute top-[50%] left-[50%] transform -translate-x-1/2 -translate-y-1/2",children:"No Items in trash"})]})}},8251:function(e,t,a){"use strict";a.d(t,{Cd:function(){return d},X:function(){return c},bZ:function(){return o}});var r=a(7437),s=a(2265),l=a(6061),i=a(345);let n=(0,l.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=s.forwardRef((e,t)=>{let{className:a,variant:s,...l}=e;return(0,r.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(n({variant:s}),a),...l})});o.displayName="Alert";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",a),...s})});d.displayName="AlertTitle";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",a),...s})});c.displayName="AlertDescription"},6812:function(e,t,a){"use strict";a.r(t),a.d(t,{Avatar:function(){return n},AvatarFallback:function(){return d},AvatarImage:function(){return o}});var r=a(7437),s=a(2265),l=a(6694),i=a(345);let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.fC,{ref:t,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...s})});n.displayName=l.fC.displayName;let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.Ee,{ref:t,className:(0,i.cn)("aspect-square h-full w-full",a),...s})});o.displayName=l.Ee.displayName;let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.NY,{ref:t,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...s})});d.displayName=l.NY.displayName},3089:function(e,t,a){"use strict";a.d(t,{d:function(){return u},z:function(){return f}});var r=a(7437),s=a(2265),l=a(7256),i=a(6061),n=a(345),o=a(6691),d=a.n(o),c=a(4769);let u=(0,i.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:" whitespace-nowrap bg-primary text-lg text-primary-foreground shadow-2xl shadow-indigo-600/50 rounded-lg ",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline","btn-primary":" whitespace-nowrap hover:text-primary-foreground dark:bg-gradient-to-t dark:from-[#24232C] dark:to-[#100F18] dark:text-primary-foreground border hover:border-primary dark:border-[#464553] dark:hover:bg-accent hover:bg-primary dark:hover:border-muted-foreground text-lg font-normal","btn-secondary":"whitespace-nowrap dark:text-primary-foreground text-lg font-normal"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),f=s.forwardRef((e,t)=>{let{className:a,variant:s,icon:i,logoStyles:o,size:f,children:m,asChild:p=!1,...x}=e;return(p&&l.g7,p)?(0,r.jsx)(l.g7,{className:(0,n.cn)(u({variant:s,size:f,className:a})),ref:t,...x}):(0,r.jsxs)("button",{className:(0,n.cn)(u({variant:s,size:f,className:a})),ref:t,...x,children:[i&&(0,r.jsx)(d(),{src:i,alt:"icon",className:((0,c.m6)("mr-2"),o),width:30}),m]})});f.displayName="Button"},1472:function(e,t,a){"use strict";a.r(t),a.d(t,{Dialog:function(){return o},DialogClose:function(){return u},DialogContent:function(){return m},DialogDescription:function(){return g},DialogFooter:function(){return x},DialogHeader:function(){return p},DialogOverlay:function(){return f},DialogPortal:function(){return c},DialogTitle:function(){return h},DialogTrigger:function(){return d}});var r=a(7437),s=a(2265),l=a(8712),i=a(2549),n=a(345);let o=l.fC,d=l.xz,c=l.h_,u=l.x8,f=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.aV,{ref:t,className:(0,n.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});f.displayName=l.aV.displayName;let m=s.forwardRef((e,t)=>{let{className:a,children:s,...o}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(f,{}),(0,r.jsxs)(l.VY,{ref:t,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...o,children:[s,(0,r.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(i.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=l.VY.displayName;let p=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};p.displayName="DialogHeader";let x=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};x.displayName="DialogFooter";let h=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.Dx,{ref:t,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",a),...s})});h.displayName=l.Dx.displayName;let g=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.dk,{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})});g.displayName=l.dk.displayName},6582:function(e,t,a){"use strict";a.d(t,{I:function(){return i}});var r=a(7437),s=a(2265),l=a(345);let i=s.forwardRef((e,t)=>{let{className:a,type:s,...i}=e;return(0,r.jsx)("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...i})});i.displayName="Input"},6429:function(e,t,a){"use strict";a.d(t,{_:function(){return d}});var r=a(7437),s=a(2265),l=a(6743),i=a(6061),n=a(345);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.f,{ref:t,className:(0,n.cn)(o(),a),...s})});d.displayName=l.f.displayName},2485:function(e,t,a){"use strict";a.r(t),a.d(t,{ScrollArea:function(){return n},ScrollBar:function(){return o}});var r=a(7437),s=a(2265),l=a(5331),i=a(345);let n=s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsxs)(l.fC,{ref:t,className:(0,i.cn)("relative overflow-hidden",a),...n,children:[(0,r.jsx)(l.l_,{className:"h-full w-full rounded-[inherit]",children:s}),(0,r.jsx)(o,{}),(0,r.jsx)(l.Ns,{})]})});n.displayName=l.fC.displayName;let o=s.forwardRef((e,t)=>{let{className:a,orientation:s="vertical",...n}=e;return(0,r.jsx)(l.gb,{ref:t,orientation:s,className:(0,i.cn)("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 border-t border-t-transparent p-[1px]",a),...n,children:(0,r.jsx)(l.q4,{className:(0,i.cn)("relative rounded-full bg-border","vertical"===s&&"flex-1")})})});o.displayName=l.gb.displayName},1735:function(e,t,a){"use strict";a.d(t,{Bw:function(){return h},DI:function(){return u},Ph:function(){return c},Ql:function(){return v},i4:function(){return m},ki:function(){return f}});var r=a(7437),s=a(2265),l=a(8010),i=a(3523),n=a(9224),o=a(2442),d=a(345);let c=l.fC,u=l.ZA,f=l.B4,m=s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsxs)(l.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...n,children:[s,(0,r.jsx)(l.JO,{asChild:!0,children:(0,r.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=l.xz.displayName;let p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(n.Z,{className:"h-4 w-4"})})});p.displayName=l.u_.displayName;let x=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(i.Z,{className:"h-4 w-4"})})});x.displayName=l.$G.displayName;let h=s.forwardRef((e,t)=>{let{className:a,children:s,position:i="popper",...n}=e;return(0,r.jsx)(l.h_,{children:(0,r.jsxs)(l.VY,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...n,children:[(0,r.jsx)(p,{}),(0,r.jsx)(l.l_,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)(x,{})]})})});h.displayName=l.VY.displayName;let g=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...s})});g.displayName=l.__.displayName;let v=s.forwardRef((e,t)=>{let{className:a,children:s,...i}=e;return(0,r.jsxs)(l.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(l.wU,{children:(0,r.jsx)(o.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(l.eT,{children:s})]})});v.displayName=l.ck.displayName;let j=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...s})});j.displayName=l.Z0.displayName},1839:function(e,t,a){"use strict";a.d(t,{_v:function(){return c},aJ:function(){return d},pn:function(){return n},u:function(){return o}});var r=a(7437),s=a(2265),l=a(8567),i=a(345);let n=l.zt,o=l.fC,d=l.xz,c=s.forwardRef((e,t)=>{let{className:a,sideOffset:s=4,...n}=e;return(0,r.jsx)(l.VY,{ref:t,sideOffset:s,className:(0,i.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})});c.displayName=l.VY.displayName},74:function(e,t,a){"use strict";let r;a.r(t),a.d(t,{SubscriptionModalProvider:function(){return g},useSubscriptionModal:function(){return h}});var s=a(7437),l=a(2265),i=a(1472),n=a(1623),o=a(345),d=a(3089),c=a(2719),u=a(4622),f=a(7106);let m=()=>(!r&&(r=(0,f.J)("pk_test_51MX5qySCHrKntgUdOMHZP4XqQVLH9skOO4V4RxkYwOD4YexZb7c7ZXOuSTmIN1GaCQdDUE8uz0euuUCidAnBhwi700WCMffU8R")),r);var p=e=>{let{products:t}=e,{open:a,setOpen:r}=h(),{toast:f}=(0,u.pm)(),{subscription:p}=(0,n.useSupabaseUser)(),[x,g]=(0,l.useState)(!1),{user:v}=(0,n.useSupabaseUser)();console.log("products",t);let j=async e=>{try{if(g(!0),!v){f({title:"You must be logged in"}),g(!1);return}if(p){f({title:"Already on a paid plan"}),g(!1);return}let{sessionId:t}=await (0,o.qC)({url:"/api/create-checkout-session",data:{price:e}});console.log("Getting Checkout for stripe");let a=await m();null==a||a.redirectToCheckout({sessionId:t})}catch(e){f({title:"Oppse! Something went wrong.",variant:"destructive"})}finally{g(!1)}};return(0,s.jsx)(i.Dialog,{open:a,onOpenChange:r,children:(null==p?void 0:p.status)==="active"?(0,s.jsx)(i.DialogContent,{children:"Already on a paid plan!"}):(0,s.jsxs)(i.DialogContent,{children:[(0,s.jsx)(i.DialogHeader,{children:(0,s.jsx)(i.DialogTitle,{children:"Upgrade to a Pro Plan"})}),(0,s.jsx)(i.DialogDescription,{children:"To access Pro features you need to have a paid plan."}),t.length?t.map(e=>{var t;return(0,s.jsx)("div",{className:"   flex   justify-between   items-center   ",children:null===(t=e.prices)||void 0===t?void 0:t.map(e=>(0,s.jsxs)(l.Fragment,{children:[(0,s.jsxs)("b",{className:"text-3xl text-foreground",children:[(0,o.T4)(e)," / ",(0,s.jsx)("small",{children:e.interval})]}),(0,s.jsx)(d.z,{onClick:()=>j(e),disabled:x,children:x?(0,s.jsx)(c.Z,{}):"Upgrade ✨"})]},e.id))},e.id)}):""]})})};let x=(0,l.createContext)({open:!1,setOpen:()=>{}}),h=()=>(0,l.useContext)(x),g=e=>{let{children:t,products:a}=e,[r,i]=(0,l.useState)(!1);return(0,s.jsxs)(x.Provider,{value:{open:r,setOpen:i},children:[t,(0,s.jsx)(p,{products:a})]})}},1623:function(e,t,a){"use strict";a.r(t),a.d(t,{SupabaseUserProvider:function(){return c},useSupabaseUser:function(){return d}});var r=a(7437),s=a(2265),l=a(3082),i=a(1880),n=a(4622);let o=(0,s.createContext)({user:null,subscription:null}),d=()=>(0,s.useContext)(o),c=e=>{let{children:t}=e,a=(0,l.createClientComponentClient)(),[d,c]=(0,s.useState)(null),[u,f]=(0,s.useState)(null),{toast:m}=(0,n.pm)();return(0,s.useEffect)(()=>{let e=async()=>{let{data:{user:e}}=await a.auth.getUser();if(e){c(e);let{data:t,error:a}=await (0,i.I$)(e.id);t&&f(t),a&&m({title:"Unexpected Error",description:"Opps! something went wrong. Try again later"})}};e()},[a,m]),(0,r.jsx)(o.Provider,{value:{user:d,subscription:u},children:t})}}},function(e){e.O(0,[819,413,126,732,401,473,698,396,909,796,506,971,472,744],function(){return e(e.s=4275)}),_N_E=e.O()}]);